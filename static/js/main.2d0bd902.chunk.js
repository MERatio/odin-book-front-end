(this["webpackJsonpodin-book-front-end"]=this["webpackJsonpodin-book-front-end"]||[]).push([[0],{156:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},166:function(e,t){},168:function(e,t){},179:function(e,t){},181:function(e,t){},208:function(e,t){},210:function(e,t){},211:function(e,t){},216:function(e,t){},218:function(e,t){},237:function(e,t){},249:function(e,t){},252:function(e,t){},259:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(124),r=a.n(s),i=a(9),o=(a(134),a(26)),l=(a(156),a(4)),u=a.n(l),d=a(11),b=a(6),m=a(7),j=(a(158),a(5)),p=a(129),h=a(25),f=new(a.n(h).a);function v(){return(v=Object(d.a)(u.a.mark((function e(){var t,a,n=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,fetch(t,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=function(){return v.apply(this,arguments)},O=(a(159),a(0));var x=function(e){var t=e.type,a=e.size;return Object(O.jsx)("div",{className:"BootstrapSpinner",children:Object(O.jsx)("div",{className:"spinner-".concat(t," text-primary"),style:{width:a,height:a},role:"status",children:Object(O.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})};var w=function(e){var t=e.alert,a=e.onAlertDelete;return Object(n.useEffect)((function(){var e=setTimeout((function(){return a(t.id)}),1e4);return function(){return clearTimeout(e)}}),[t,a]),Object(O.jsxs)("div",{className:"alert alert-".concat(t.type||"danger"," d-flex align-items-center alert-dismissible mb-1"),role:"alert","data-id":t.id,children:[function(e){var t=24;switch(e){case"success":return Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"currentColor",className:"bi bi-check-circle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",role:"img","aria-label":"Success:",children:Object(O.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})});case"info":return Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"currentColor",className:"bi bi-info-circle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",role:"img","aria-label":"Info:",children:Object(O.jsx)("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})});case"warning":case"danger":default:return Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"currentColor",className:"bi bi-exclamation-circle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",role:"img","aria-label":"warning"===e?"Warning:":"Danger:",children:Object(O.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})})}}(t.type),Object(O.jsx)("div",{children:t.msg}),Object(O.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){a(t.id)}})]})};var N=function(e){var t=e.alerts,a=e.onAlertDelete;return Object(O.jsx)(O.Fragment,{children:t.map((function(e){return Object(O.jsx)(w,{alert:e,onAlertDelete:a},e.id)}))})},y=a(125),k=a.n(y);var S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"80",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp",n=k()(e),c="https://www.gravatar.com/avatar/".concat(n,"?s=").concat(t,"&d=").concat(a);return c};var C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"80",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp",n=e.picture,c=n.isLocal?""===n.filename?S(e.email,t,a):"".concat("https://odin-book-api-60312.herokuapp.com","/images/").concat(n.filename):n.filename;return c};var I=function(e){var t=e.currentUser;return Object(O.jsx)(j.b,{path:"/users/userId",children:function(e){var a=e.match;return Object(O.jsxs)(i.c,Object(b.a)(Object(b.a)({className:"nav-link ".concat(a?"active":"")},a&&{"aria-current":"page"}),{},{exact:!0,to:"/users/".concat(t._id),children:[Object(O.jsx)("img",{className:"rounded-circle me-2",src:C(t),alt:"Current user",width:"28",height:"28"}),Object(O.jsx)("span",{children:t.firstName})]}))}})};var F=function(e){var t=e.currentUser,a=e.signOut;return Object(O.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark sticky-top",children:Object(O.jsxs)("div",{className:"container-fluid",children:[Object(O.jsx)(i.c,{className:"navbar-brand",to:"/posts",children:"Odin Book"}),Object(O.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(O.jsx)("span",{className:"navbar-toggler-icon"})}),Object(O.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(O.jsxs)("ul",{className:"navbar-nav ms-auto mb-2 mb-sm-0",children:[Object(O.jsx)("li",{className:"nav-item me-4",children:Object(O.jsx)(I,{currentUser:t})}),Object(O.jsx)("li",{className:"nav-item",children:Object(O.jsx)("button",{type:"button",className:"btn btn-outline-light",onClick:a,children:"Sign out"})})]})})]})})},U=a(21),E=a(33);var B=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){return c(!0),function(){return c(!1)}}),[]),a};function L(){return(L=Object(d.a)(u.a.mark((function e(){var t,a,n,c,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",a=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2&&void 0!==s[2]&&s[2],e.next=5,fetch(t,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:a});case 5:return c=e.sent,e.abrupt("return",n?c:c.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(){return L.apply(this,arguments)};function P(e){var t=e.className,a=e.text,n=e.loadingText,c=e.disabled,s=e.isSubmitting;return Object(O.jsx)("button",{type:"submit",className:t,disabled:c||s,children:s?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{className:"spinner-border spinner-border-sm fw-bold",role:"status","aria-hidden":"true"}),n]}):Object(O.jsx)("span",{className:"fw-bold",children:a})})}P.defaultProps={className:"",text:"Submit",disabled:!1};var T=P;var _=function(e){var t=e.setCurrentUser,a=B(),c=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",passwordConfirmation:""}),s=Object(m.a)(c,2),r=s[0],i=s[1],l=Object(n.useState)(!1),j=Object(m.a)(l,2),p=j[0],h=j[1];function f(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(E.a)({},a,n))}))}function v(e){var t=e.target,a=t.parentNode.querySelectorAll(".invalid-feedback");if(0!==a.length){t.classList.remove("is-invalid");var n,c=Object(U.a)(a);try{for(c.s();!(n=c.n()).done;){n.value.remove()}}catch(s){c.e(s)}finally{c.f()}}}function g(){var e=document.getElementById("signUpForm");if(e){var t=e.querySelectorAll(".invalid-feedback");if(0===t.length)return;var a,n=e.querySelectorAll("input"),c=Object(U.a)(n);try{for(c.s();!(a=c.n()).done;){a.value.classList.remove("is-invalid")}}catch(i){c.e(i)}finally{c.f()}var s,r=Object(U.a)(t);try{for(r.s();!(s=r.n()).done;){s.value.remove()}}catch(i){r.e(i)}finally{r.f()}}}function x(){return(x=Object(d.a)(u.a.mark((function e(n){var c,s,r,l,d,m,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(e){var t,a=document.getElementById("signUpForm"),n=Object(U.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value,s=a.querySelector("input[name='".concat(c.param,"']")),r=s.parentNode;s.classList.add("is-invalid");var i=document.createElement("div");i.classList.add("invalid-feedback");var o=document.createTextNode(c.msg);i.appendChild(o),r.insertAdjacentElement("beforeend",i)}}catch(l){n.e(l)}finally{n.f()}},n.preventDefault(),g(),h(!0),e.prev=4,e.next=7,A("".concat("https://odin-book-api-60312.herokuapp.com","/users"),new FormData(n.target));case 7:if(s=e.sent,h(!1),!s.err){e.next=13;break}window.alerts([{msg:s.err.message}]),e.next=48;break;case 13:if(!s.errors){e.next=43;break}r=!1,l=!1,d=Object(U.a)(s.errors),e.prev=17,d.s();case 19:if((m=d.n()).done){e.next=31;break}j=m.value,e.t0=j.param,e.next="email"===e.t0?24:"picture"===e.t0?26:28;break;case 24:return r=!0,e.abrupt("break",29);case 26:return l=!0,e.abrupt("break",29);case 28:return e.abrupt("break",29);case 29:e.next=19;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(17),d.e(e.t1);case 36:return e.prev=36,d.f(),e.finish(36);case 39:a&&i(Object(b.a)(Object(b.a)({firstName:s.user.firstName,lastName:s.user.lastName,email:r?"":s.user.email},l&&{picture:""}),{},{password:"",passwordConfirmation:""})),c(s.errors),e.next=48;break;case 43:o.Modal.getInstance(document.getElementById("signUpModal")).hide(),localStorage.setItem("jwt",s.jwt),t(s.user),window.alerts([{msg:"You have successfuly signed up",type:"success"}]);case 48:e.next=54;break;case 50:e.prev=50,e.t2=e.catch(4),h(!1),window.alerts([{msg:e.t2.message}]);case 54:case"end":return e.stop()}}),e,null,[[4,50],[17,33,36,39]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=document.getElementById("signUpModal"),t=document.getElementById("picture");e.addEventListener("hidden.bs.modal",(function(e){g(),i({firstName:"",lastName:"",email:"",picture:"",password:"",passwordConfirmation:""}),t.value=""}))}),[]),Object(O.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},id:"signUpForm",children:[Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{type:"text",className:"form-control",placeholder:"First name","aria-label":"First name",name:"firstName",value:r.firstName,onChange:f,onFocus:v})}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{type:"text",className:"form-control",placeholder:"Last name","aria-label":"Last name",name:"lastName",value:r.lastName,onChange:f,onFocus:v})}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{type:"text",className:"form-control",placeholder:"Email","aria-label":"Email",name:"email",value:r.email,onChange:f,onFocus:v})}),Object(O.jsxs)("div",{className:"input-group mb-3",children:[Object(O.jsx)("label",{className:"input-group-text",htmlFor:"picture",children:"Upload picture (optional)"}),Object(O.jsx)("input",{type:"file",accept:"image/*",className:"form-control",id:"picture",name:"picture",onFocus:v})]}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{type:"password",className:"form-control",placeholder:"Password","aria-label":"Password",name:"password",value:r.password,onChange:f,onFocus:v})}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{type:"password",className:"form-control",placeholder:"Password confirmation","aria-label":"Password confirmation",name:"passwordConfirmation",value:r.passwordConfirmation,onChange:f,onFocus:v})}),Object(O.jsx)(T,{className:"btn btn-success btn-lg w-100 rounded-3",text:"Sign Up",loadingText:"Signing Up...",isSubmitting:p})]})};var M=function(e){var t=e.setCurrentUser;return Object(O.jsx)("div",{className:"modal fade",id:"signUpModal",tabIndex:"-1","aria-labelledby":"signUpModalLabel","aria-hidden":"true",children:Object(O.jsx)("div",{className:"modal-dialog",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsx)("h3",{className:"modal-title",id:"signUpModalLabel",children:"Sign Up"}),Object(O.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close","data-modal-id":"signUpModal",onClick:function(e){var t=e.target.dataset.modalId;o.Modal.getInstance(document.getElementById(t)).hide()}})]}),Object(O.jsx)("div",{className:"modal-body",children:Object(O.jsx)(_,{setCurrentUser:t})})]})})})};function z(){return(z=Object(d.a)(u.a.mark((function e(){var t,a,n,c,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",a=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2&&void 0!==s[2]&&s[2],e.next=5,fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify(a)});case 5:return c=e.sent,e.abrupt("return",n?c:c.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(){return z.apply(this,arguments)};(function(){window.fbAsyncInit=function(){window.FB.init({appId:"".concat("945137412920931"),cookie:!0,xfbml:!0,version:"v10.0"}),window.FB.AppEvents.logPageView()},function(e,t,a){var n,c=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",c.parentNode.insertBefore(n,c))}(document,"script","facebook-jssdk")})();var R=function(e){var t=e.setIsLoading,a=e.setCurrentUser,c=B(),s=Object(n.useState)({email:"",password:""}),r=Object(m.a)(s,2),i=r[0],l=r[1],j=Object(n.useState)(!1),p=Object(m.a)(j,2),h=p[0],f=p[1],v=Object(n.useState)(void 0),g=Object(m.a)(v,2),x=g[0],w=g[1],N=Object(n.useState)(!1),y=Object(m.a)(N,2),k=y[0],S=y[1],C=Object(n.useState)({}),I=Object(m.a)(C,2),F=I[0],L=I[1];function A(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(E.a)({},a,n))}))}function P(){return(P=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),f(!0),e.next=5,D("".concat("https://odin-book-api-60312.herokuapp.com","/auth/local"),i);case 5:n=e.sent,f(!1),n.err?(c&&l((function(e){return Object(b.a)(Object(b.a)({},e),{},{password:""})})),window.alerts([{msg:n.err.message}])):(localStorage.setItem("jwt",n.jwt),a(n.currentUser),window.alerts([{msg:"You have successfuly signed in",type:"success"}])),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),f(!1),window.alerts([{msg:e.t0.message}]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=setTimeout((function(){window.FB?(w(!0),window.FB.getLoginStatus((function(e){L(e)}))):(w(!1),window.alerts([{msg:"Facebook button is disabled because the Facebook SDK is blocked.",type:"info"}]))}),1500);return function(){return clearTimeout(e)}}),[]),Object(O.jsxs)("form",{onSubmit:function(e){return P.apply(this,arguments)},className:"p-4 bg-white rounded-3 shadow",children:[Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"Email","aria-label":"Email",disabled:k,name:"email",value:i.email,onChange:A})}),Object(O.jsx)("div",{className:"mb-3",children:Object(O.jsx)("input",{type:"password",className:"form-control form-control-lg",placeholder:"Password","aria-label":"Password",disabled:k,name:"password",value:i.password,onChange:A})}),Object(O.jsx)(T,{className:"btn btn-primary btn-lg w-100 rounded-3 mb-2",text:"Sign In",loadingText:"Signing In...",disabled:k,isSubmitting:h}),Object(O.jsxs)("button",{type:"button",className:"btn btn-primary btn-lg w-100 rounded-3",disabled:!x||k,onClick:function(){var e;function n(e){return c.apply(this,arguments)}function c(){return(c=Object(d.a)(u.a.mark((function e(n){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,D("".concat("https://odin-book-api-60312.herokuapp.com","/auth/facebook"),{userAccessToken:n.authResponse.accessToken},!0);case 4:return c=e.sent,e.next=7,c.json();case 7:(s=e.sent).err?window.alerts([{msg:s.err.message}]):(localStorage.setItem("jwt",s.jwt),a(s.currentUser),window.alerts([{msg:"You have successfuly ".concat(200===c.status?"signed in":"signed up"),type:"success"}])),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),window.alerts([{msg:e.t0.message}]);case 14:t(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function s(e){return!(!e||!e.data_access_expiration_time)&&1e3*e.authResponse.data_access_expiration_time<=Date.now()}function r(e,t){if(e&&e.authResponse&&e.authResponse.grantedScopes){var a,n=e.authResponse.grantedScopes.split(","),c=t.split(","),s=Object(U.a)(c);try{for(s.s();!(a=s.n()).done;){var r=a.value;if(!n.includes(r))return!1}}catch(i){s.e(i)}finally{s.f()}return!0}return!1}function i(e,t){if(e&&e.authResponse&&e.authResponse.grantedScopes){var a,n=e.authResponse.grantedScopes.split(","),c=t.split(","),s="",r=Object(U.a)(c);try{for(r.s();!(a=r.n()).done;){var i=a.value;n.includes(i)||(s.length>0&&(s+=","),s+=i)}}catch(o){r.e(o)}finally{r.f()}return s}return t}function o(e){S(!0),window.FB.login((function(e){S(!1),L(e),function(e){"connected"===e.status&&(s(e)||!r(e,"public_profile,email")?window.alerts([{msg:"Facebook email is required. Please select the Facebook button again.",type:"info"}]):n(e))}(e)}),Object(b.a)(Object(b.a)({scope:i(e,"public_profile,email")},"connected"===e.status?s(e)?{auth_type:"reauthorize"}:r(e,"public_profile,email")?{}:{auth_type:"rerequest"}:{}),{},{return_scopes:!0}))}x&&!k&&("connected"!==(e=F).status||s(e)||!r(e,"public_profile,email")?o(e):n(e))},children:[Object(O.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"#fff",className:"bi bi-facebook",viewBox:"0 0 16 16",role:"img","aria-label":"Facebook icon",children:Object(O.jsx)("path",{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"})}),Object(O.jsx)("span",{className:"fw-bold ms-2",children:"Continue with Facebook"})]}),Object(O.jsx)("div",{className:"border-bottom my-4"}),Object(O.jsx)("button",{type:"button",className:"btn btn-success btn-lg w-100 rounded-3","data-modal-id":"signUpModal",disabled:k,onClick:function(e){var t=e.target.dataset.modalId;new o.Modal(document.getElementById(t)).show()},children:Object(O.jsx)("span",{className:"fw-bold pe-none",children:"Create New Account"})})]})};a(259);var q=function(e){var t=e.setIsLoading,a=e.setCurrentUser;return Object(O.jsx)("div",{className:"container mt-4",children:Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsxs)("div",{className:"col-sm-10 col-md-8 col-lg-6",children:[Object(O.jsx)("h1",{className:"sign-in-h1 text-primary text-center fw-bold mb-4",children:"Odin Book"}),Object(O.jsx)("section",{children:Object(O.jsx)(R,{setIsLoading:t,setCurrentUser:a})})]})})})};var V=function(){return new URLSearchParams(Object(j.h)().search)},Y=a(27),J=a.n(Y),H=a(128),G=a(127),K=a.n(G);var W=function(e){var t=e.picture;return t.isLocal?""===t.filename?"":"".concat("https://odin-book-api-60312.herokuapp.com","/images/").concat(t.filename):t.filename};var Q=function(e){var t=e.post,a=W(t);return Object(O.jsxs)("article",{className:"card mb-3",children:[Object(O.jsxs)("div",{className:"card-header",children:[Object(O.jsx)("h5",{className:"card-title",children:t.title}),Object(O.jsx)("p",{className:"card-subtitle mb-2",children:t.author.firstName+" "+t.author.lastName}),Object(O.jsx)("p",{className:"card-subtitle",children:Object(H.a)(new Date(t.updatedAt),"PPpp")})]}),a&&Object(O.jsx)(i.b,{to:"/posts/".concat(t._id),children:Object(O.jsx)("img",{src:a,className:"card-img-top post-image",alt:"Post"})}),Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsx)("p",{className:"card-text",children:t.text}),Object(O.jsxs)(i.b,{to:"/posts/".concat(t._id,"/reactions"),className:"card-link",children:[t.reactions.length," reactions"]}),Object(O.jsx)(i.b,{to:"/posts/".concat(t._id),className:"card-link",children:K()("comments",t.comments.length,!0)})]})]})};function X(e){var t=e.posts.map((function(e){return Object(O.jsx)(Q,{post:e},e._id)}));return Object(O.jsx)(O.Fragment,{children:t})}X.propTypes={posts:J.a.array.isRequired};var Z=X;var $=function(e){for(var t=e.route,a=e.currentPage,n=e.itemsLimit,c=e.pagesCount,s=[],r=1;r<=c;r++)s.push(r);return Object(O.jsx)("nav",{"aria-label":"Posts pages",children:Object(O.jsxs)("ul",{className:"pagination justify-content-center",children:[a>1&&Object(O.jsx)("li",{className:"page-item",children:Object(O.jsx)(i.b,{className:"page-link",to:"".concat(t,"?page=").concat(a-1,"&limit=").concat(n),children:"Previous"})}),s.map((function(e){var c=e===a;return Object(O.jsx)("li",Object(b.a)(Object(b.a)({className:"page-item"+(c?" active":"")},c&&{"aria-current":"page"}),{},{children:c?Object(O.jsx)("span",{className:"page-link",children:e}):Object(O.jsx)(i.b,{className:"page-link",to:"".concat(t,"?page=").concat(e,"&limit=").concat(n),children:e})}),e)})),a<c&&Object(O.jsx)("li",{className:"page-item",children:Object(O.jsx)(i.b,{className:"page-link",to:"".concat(t,"?page=").concat(a+1,"&limit=").concat(n),children:"Next"})})]})})};var ee=function(){var e=B(),t=V(),a=Object(n.useState)(null),c=Object(m.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),l=o[0],b=o[1],j=Object(n.useState)(!1),p=Object(m.a)(j,2),h=p[0],f=p[1],v=Object(n.useState)([]),w=Object(m.a)(v,2),N=w[0],y=w[1],k=Object(n.useState)(0),S=Object(m.a)(k,2),C=S[0],I=S[1];return Object(n.useEffect)((function(){if(e){var a=parseInt(t.get("page"),10)||1,n=parseInt(t.get("limit"),10)||10;a===s&&n===l||(r(a<1?1:a),b(n<10?10:n))}}),[e,t,s,l]),Object(n.useEffect)((function(){function t(){return(t=Object(d.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return(a=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("".concat("https://odin-book-api-60312.herokuapp.com","/posts?page=").concat(s,"&limit=").concat(l));case 3:if(!(t=e.sent).err){e.next=8;break}window.alerts([{msg:t.err.message}]),e.next=9;break;case 8:return e.abrupt("return",t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),window.alerts([{msg:e.t0.message}]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)},t=function(){return a.apply(this,arguments)},f(!0),e.next=5,t();case 5:n=e.sent,f(!1),n.err||(y(n.currentPosts),I(Math.ceil(n.totalPostsCount/l)));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e&&null!==s&&null!==l&&function(){t.apply(this,arguments)}()}),[e,s,l]),h?Object(O.jsx)(x,{type:"border",size:"2em"}):Object(O.jsx)("div",{className:"container mt-3",children:Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsxs)("div",{className:"col-md-8",children:[Object(O.jsx)("section",{children:Object(O.jsx)(Z,{posts:N})}),N.length>0&&C>1&&Object(O.jsx)($,{route:"/posts",currentPage:s,itemsLimit:l,pagesCount:C})]})})})};var te=function(){var e=Object(j.i)().userId;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{children:"TODO: UsersShowView"}),Object(O.jsx)("h2",{children:e})]})};var ae=function(){var e=Object(j.g)(),t=Object(n.useState)(!0),a=Object(m.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)([]),i=Object(m.a)(r,2),o=i[0],l=i[1],h=Object(n.useState)(null),v=Object(m.a)(h,2),w=v[0],y=v[1];return Object(n.useEffect)((function(){f.addListener("alerts",(function(e){var t=e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{id:Object(p.a)()})}));l(t)}))}),[]),Object(n.useEffect)((function(){window.alerts=function(e){return f.emit("alerts",e)}}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("".concat("https://odin-book-api-60312.herokuapp.com","/users/current-user"));case 3:t=e.sent,y(t.currentUser),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),y(!1),window.alerts([{msg:e.t0.message}]);case 11:s(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c?Object(O.jsx)(x,{type:"grow",size:"3em"}):Object(O.jsxs)(O.Fragment,{children:[w&&Object(O.jsx)(F,{currentUser:w,signOut:function(){localStorage.removeItem("jwt"),y(!1),e.push("/"),window.alerts([{msg:"You have successfully signed out",type:"success"}])}}),o.length>0&&Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"row justify-content-center",children:Object(O.jsx)("div",{className:"col-md-8",children:Object(O.jsx)(N,{alerts:o,onAlertDelete:function(e){var t=o.filter((function(t){return t.id!==e}));l(t)}})})})}),Object(O.jsx)("main",{children:Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{exact:!0,path:"/",children:w?Object(O.jsx)(j.a,{to:"/posts"}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(M,{setCurrentUser:y}),Object(O.jsx)(q,{setIsLoading:s,setCurrentUser:y})]})}),Object(O.jsx)(j.b,{exact:!0,path:"/posts",children:w?Object(O.jsx)(ee,{}):Object(O.jsx)(j.a,{to:"/"})}),Object(O.jsx)(j.b,{exact:!0,path:"/users/:userId",children:w?Object(O.jsx)(te,{}):Object(O.jsx)(j.a,{to:"/"})})]})})]})},ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,265)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),s(e),r(e)}))};a(260).config(),r.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(i.a,{children:Object(O.jsx)(ae,{})})}),document.getElementById("root")),ne()}},[[264,1,2]]]);
//# sourceMappingURL=main.2d0bd902.chunk.js.map