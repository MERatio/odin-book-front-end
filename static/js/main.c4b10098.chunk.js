(this["webpackJsonpodin-book-front-end"]=this["webpackJsonpodin-book-front-end"]||[]).push([[0],{157:function(e,t,a){},159:function(e,t,a){},166:function(e,t){},168:function(e,t){},179:function(e,t){},181:function(e,t){},208:function(e,t){},210:function(e,t){},211:function(e,t){},216:function(e,t){},218:function(e,t){},237:function(e,t){},249:function(e,t){},252:function(e,t){},259:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(124),c=a.n(r),i=a(17),o=(a(135),a(26)),l=(a(157),a(4)),u=a.n(l),d=a(10),b=a(6),m=a(7),p=(a(159),a(5)),j=a(130),f=a(25),h=new(a.n(f).a);function v(){return(v=Object(d.a)(u.a.mark((function e(){var t,a,n=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,fetch(t,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){return v.apply(this,arguments)},g=a(0);function x(e){var t=e.type,a=e.size,n=e.classes;return Object(g.jsx)("div",{className:n,children:Object(g.jsx)("div",{className:"spinner-".concat(t," text-primary"),style:{width:a,height:a},role:"status",children:Object(g.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}x.defaultProps={type:"border",size:"2em",classes:""};var w=x;var y=function(e){var t=e.alert,a=e.onAlertDelete;return Object(n.useEffect)((function(){var e=setTimeout((function(){return a(t.id)}),1e4);return function(){return clearTimeout(e)}}),[t,a]),Object(g.jsxs)("div",{className:"alert alert-".concat(t.type||"danger"," d-flex align-items-center alert-dismissible mb-1"),role:"alert","data-id":t.id,children:[function(e){var t=24;switch(e){case"success":return Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"currentColor",className:"bi bi-check-circle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",role:"img","aria-label":"Success:",children:Object(g.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})});case"info":return Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"currentColor",className:"bi bi-info-circle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",role:"img","aria-label":"Info:",children:Object(g.jsx)("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})});case"warning":case"danger":default:return Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"currentColor",className:"bi bi-exclamation-circle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",role:"img","aria-label":"warning"===e?"Warning:":"Danger:",children:Object(g.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})})}}(t.type),Object(g.jsx)("div",{children:t.msg}),Object(g.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){a(t.id)}})]})};var N=function(e){var t=e.alerts,a=e.onAlertDelete;return Object(g.jsx)(g.Fragment,{children:t.map((function(e){return Object(g.jsx)(y,{alert:e,onAlertDelete:a},e.id)}))})},k=a(125),S=a.n(k);var C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"80",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp",n=S()(e),s="https://www.gravatar.com/avatar/".concat(n,"?s=").concat(t,"&d=").concat(a);return s};var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"80",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp",n=e.picture,s=n.isLocal?""===n.filename?C(e.email,t,a):"".concat("https://odin-book-api-60312.herokuapp.com","/images/").concat(n.filename):n.filename;return s};var I=function(e){var t=e.currentUser;return Object(g.jsx)(p.b,{path:"/users/userId",children:function(e){var a=e.match;return Object(g.jsxs)(i.c,Object(b.a)(Object(b.a)({className:"nav-link ".concat(a?"active":"")},a&&{"aria-current":"page"}),{},{exact:!0,to:"/users/".concat(t._id),children:[Object(g.jsx)("img",{className:"rounded-circle me-2",src:F(t),alt:"Current user",width:"28",height:"28"}),Object(g.jsx)("span",{children:t.firstName})]}))}})};var U=function(e){var t=e.currentUser,a=e.signOut;return Object(g.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark sticky-top",children:Object(g.jsxs)("div",{className:"container-fluid",children:[Object(g.jsx)(i.c,{className:"navbar-brand",to:"/posts",children:"Odin Book"}),Object(g.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(g.jsx)("span",{className:"navbar-toggler-icon"})}),Object(g.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(g.jsxs)("ul",{className:"navbar-nav ms-auto mb-2 mb-sm-0",children:[Object(g.jsx)("li",{className:"nav-item me-4",children:Object(g.jsx)(I,{currentUser:t})}),Object(g.jsx)("li",{className:"nav-item",children:Object(g.jsx)("button",{type:"button",className:"btn btn-outline-light",onClick:a,children:"Sign out"})})]})})]})})},E=a(21),B=a(33);var A=function(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){return s(!0),function(){return s(!1)}}),[]),a};function L(){return(L=Object(d.a)(u.a.mark((function e(){var t,a,n,s,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},n=r.length>2&&void 0!==r[2]&&r[2],e.next=5,fetch(t,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:a});case 5:return s=e.sent,e.abrupt("return",n?s:s.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(){return L.apply(this,arguments)};function T(e){var t=e.className,a=e.text,n=e.loadingText,s=e.disabled,r=e.isSubmitting;return Object(g.jsx)("button",{type:"submit",className:t,disabled:s||r,children:r?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{className:"spinner-border spinner-border-sm fw-bold",role:"status","aria-hidden":"true"}),n]}):Object(g.jsx)("span",{className:"fw-bold",children:a})})}T.defaultProps={className:"",text:"Submit",disabled:!1};var P=T;var z=function(e){var t=e.setCurrentUser,a=A(),s=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",passwordConfirmation:""}),r=Object(m.a)(s,2),c=r[0],i=r[1],l=Object(n.useState)(!1),p=Object(m.a)(l,2),j=p[0],f=p[1];function h(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(B.a)({},a,n))}))}function v(e){var t=e.target,a=t.parentNode.querySelectorAll(".invalid-feedback");if(0!==a.length){t.classList.remove("is-invalid");var n,s=Object(E.a)(a);try{for(s.s();!(n=s.n()).done;){n.value.remove()}}catch(r){s.e(r)}finally{s.f()}}}function O(){var e=document.getElementById("signUpForm");if(e){var t=e.querySelectorAll(".invalid-feedback");if(0===t.length)return;var a,n=e.querySelectorAll("input"),s=Object(E.a)(n);try{for(s.s();!(a=s.n()).done;){a.value.classList.remove("is-invalid")}}catch(i){s.e(i)}finally{s.f()}var r,c=Object(E.a)(t);try{for(c.s();!(r=c.n()).done;){r.value.remove()}}catch(i){c.e(i)}finally{c.f()}}}function x(){return(x=Object(d.a)(u.a.mark((function e(n){var s,r,c,l,d,m,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){var t,a=document.getElementById("signUpForm"),n=Object(E.a)(e);try{for(n.s();!(t=n.n()).done;){var s=t.value,r=a.querySelector("input[name='".concat(s.param,"']")),c=r.parentNode;r.classList.add("is-invalid");var i=document.createElement("div");i.classList.add("invalid-feedback");var o=document.createTextNode(s.msg);i.appendChild(o),c.insertAdjacentElement("beforeend",i)}}catch(l){n.e(l)}finally{n.f()}},n.preventDefault(),O(),f(!0),e.prev=4,e.next=7,_("".concat("https://odin-book-api-60312.herokuapp.com","/users"),new FormData(n.target));case 7:if(r=e.sent,f(!1),!r.err){e.next=13;break}window.alerts([{msg:r.err.message}]),e.next=48;break;case 13:if(!r.errors){e.next=43;break}c=!1,l=!1,d=Object(E.a)(r.errors),e.prev=17,d.s();case 19:if((m=d.n()).done){e.next=31;break}p=m.value,e.t0=p.param,e.next="email"===e.t0?24:"picture"===e.t0?26:28;break;case 24:return c=!0,e.abrupt("break",29);case 26:return l=!0,e.abrupt("break",29);case 28:return e.abrupt("break",29);case 29:e.next=19;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(17),d.e(e.t1);case 36:return e.prev=36,d.f(),e.finish(36);case 39:a&&i(Object(b.a)(Object(b.a)({firstName:r.user.firstName,lastName:r.user.lastName,email:c?"":r.user.email},l&&{picture:""}),{},{password:"",passwordConfirmation:""})),s(r.errors),e.next=48;break;case 43:o.Modal.getInstance(document.getElementById("signUpModal")).hide(),localStorage.setItem("jwt",r.jwt),t(r.user),window.alerts([{msg:"You have successfuly signed up",type:"success"}]);case 48:e.next=54;break;case 50:e.prev=50,e.t2=e.catch(4),f(!1),window.alerts([{msg:e.t2.message}]);case 54:case"end":return e.stop()}}),e,null,[[4,50],[17,33,36,39]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=document.getElementById("signUpModal"),t=document.getElementById("picture");e.addEventListener("hidden.bs.modal",(function(e){O(),i({firstName:"",lastName:"",email:"",picture:"",password:"",passwordConfirmation:""}),t.value=""}))}),[]),Object(g.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},id:"signUpForm",children:[Object(g.jsx)("div",{className:"mb-3",children:Object(g.jsx)("input",{type:"text",className:"form-control",placeholder:"First name","aria-label":"First name",name:"firstName",value:c.firstName,onChange:h,onFocus:v})}),Object(g.jsx)("div",{className:"mb-3",children:Object(g.jsx)("input",{type:"text",className:"form-control",placeholder:"Last name","aria-label":"Last name",name:"lastName",value:c.lastName,onChange:h,onFocus:v})}),Object(g.jsx)("div",{className:"mb-3",children:Object(g.jsx)("input",{type:"text",className:"form-control",placeholder:"Email","aria-label":"Email",name:"email",value:c.email,onChange:h,onFocus:v})}),Object(g.jsxs)("div",{className:"input-group mb-3",children:[Object(g.jsx)("label",{className:"input-group-text",htmlFor:"picture",children:"Upload picture (optional)"}),Object(g.jsx)("input",{type:"file",accept:"image/*",className:"form-control",id:"picture",name:"picture",onFocus:v})]}),Object(g.jsx)("div",{className:"mb-3",children:Object(g.jsx)("input",{type:"password",className:"form-control",placeholder:"Password","aria-label":"Password",name:"password",value:c.password,onChange:h,onFocus:v})}),Object(g.jsx)("div",{className:"mb-3",children:Object(g.jsx)("input",{type:"password",className:"form-control",placeholder:"Password confirmation","aria-label":"Password confirmation",name:"passwordConfirmation",value:c.passwordConfirmation,onChange:h,onFocus:v})}),Object(g.jsx)(P,{className:"btn btn-success btn-lg w-100 rounded-3",text:"Sign Up",loadingText:"Signing Up...",isSubmitting:j})]})};var M=function(e){var t=e.setCurrentUser;return Object(g.jsx)("div",{className:"modal fade",id:"signUpModal",tabIndex:"-1","aria-labelledby":"signUpModalLabel","aria-hidden":"true",children:Object(g.jsx)("div",{className:"modal-dialog",children:Object(g.jsxs)("div",{className:"modal-content",children:[Object(g.jsxs)("div",{className:"modal-header",children:[Object(g.jsx)("h3",{className:"modal-title",id:"signUpModalLabel",children:"Sign Up"}),Object(g.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close","data-modal-id":"signUpModal",onClick:function(e){var t=e.target.dataset.modalId;o.Modal.getInstance(document.getElementById(t)).hide()}})]}),Object(g.jsx)("div",{className:"modal-body",children:Object(g.jsx)(z,{setCurrentUser:t})})]})})})};function D(){return(D=Object(d.a)(u.a.mark((function e(){var t,a,n,s,r=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",a=r.length>1&&void 0!==r[1]?r[1]:{},n=r.length>2&&void 0!==r[2]&&r[2],e.next=5,fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify(a)});case 5:return s=e.sent,e.abrupt("return",n?s:s.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=function(){return D.apply(this,arguments)};(function(){window.fbAsyncInit=function(){window.FB.init({appId:"".concat("945137412920931"),cookie:!0,xfbml:!0,version:"v10.0"}),window.FB.AppEvents.logPageView()},function(e,t,a){var n,s=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",s.parentNode.insertBefore(n,s))}(document,"script","facebook-jssdk")})();var q=function(e){var t=e.setIsLoading,a=e.setCurrentUser,s=A(),r=Object(n.useState)({email:"",password:""}),c=Object(m.a)(r,2),i=c[0],l=c[1],p=Object(n.useState)(!1),j=Object(m.a)(p,2),f=j[0],h=j[1],v=Object(n.useState)(void 0),O=Object(m.a)(v,2),x=O[0],w=O[1],y=Object(n.useState)(!1),N=Object(m.a)(y,2),k=N[0],S=N[1],C=Object(n.useState)({}),F=Object(m.a)(C,2),I=F[0],U=F[1];function L(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(B.a)({},a,n))}))}function _(){return(_=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),h(!0),e.next=5,R("".concat("https://odin-book-api-60312.herokuapp.com","/auth/local"),i);case 5:n=e.sent,h(!1),n.err?(s&&l((function(e){return Object(b.a)(Object(b.a)({},e),{},{password:""})})),window.alerts([{msg:n.err.message}])):(localStorage.setItem("jwt",n.jwt),a(n.currentUser),window.alerts([{msg:"You have successfuly signed in",type:"success"}])),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),h(!1),window.alerts([{msg:e.t0.message}]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=setTimeout((function(){window.FB?(w(!0),window.FB.getLoginStatus((function(e){U(e)}))):(w(!1),window.alerts([{msg:"Facebook button is disabled because the Facebook SDK is blocked.",type:"info"}]))}),1500);return function(){return clearTimeout(e)}}),[]),Object(g.jsxs)("form",{onSubmit:function(e){return _.apply(this,arguments)},className:"p-4 bg-white rounded-3 shadow",children:[Object(g.jsx)("div",{className:"mb-3",children:Object(g.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"Email","aria-label":"Email",disabled:k,name:"email",value:i.email,onChange:L})}),Object(g.jsx)("div",{className:"mb-3",children:Object(g.jsx)("input",{type:"password",className:"form-control form-control-lg",placeholder:"Password","aria-label":"Password",disabled:k,name:"password",value:i.password,onChange:L})}),Object(g.jsx)(P,{className:"btn btn-primary btn-lg w-100 rounded-3 mb-2",text:"Sign In",loadingText:"Signing In...",disabled:k,isSubmitting:f}),Object(g.jsxs)("button",{type:"button",className:"btn btn-primary btn-lg w-100 rounded-3",disabled:!x||k,onClick:function(){var e;function n(e){return s.apply(this,arguments)}function s(){return(s=Object(d.a)(u.a.mark((function e(n){var s,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,R("".concat("https://odin-book-api-60312.herokuapp.com","/auth/facebook"),{userAccessToken:n.authResponse.accessToken},!0);case 4:return s=e.sent,e.next=7,s.json();case 7:(r=e.sent).err?window.alerts([{msg:r.err.message}]):(localStorage.setItem("jwt",r.jwt),a(r.currentUser),window.alerts([{msg:"You have successfuly ".concat(200===s.status?"signed in":"signed up"),type:"success"}])),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),window.alerts([{msg:e.t0.message}]);case 14:t(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function r(e){return!(!e||!e.data_access_expiration_time)&&1e3*e.authResponse.data_access_expiration_time<=Date.now()}function c(e,t){if(e&&e.authResponse&&e.authResponse.grantedScopes){var a,n=e.authResponse.grantedScopes.split(","),s=t.split(","),r=Object(E.a)(s);try{for(r.s();!(a=r.n()).done;){var c=a.value;if(!n.includes(c))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}return!1}function i(e,t){if(e&&e.authResponse&&e.authResponse.grantedScopes){var a,n=e.authResponse.grantedScopes.split(","),s=t.split(","),r="",c=Object(E.a)(s);try{for(c.s();!(a=c.n()).done;){var i=a.value;n.includes(i)||(r.length>0&&(r+=","),r+=i)}}catch(o){c.e(o)}finally{c.f()}return r}return t}function o(e){S(!0),window.FB.login((function(e){S(!1),U(e),function(e){"connected"===e.status&&(r(e)||!c(e,"public_profile,email")?window.alerts([{msg:"Facebook email is required. Please select the Facebook button again.",type:"info"}]):n(e))}(e)}),Object(b.a)(Object(b.a)({scope:i(e,"public_profile,email")},"connected"===e.status?r(e)?{auth_type:"reauthorize"}:c(e,"public_profile,email")?{}:{auth_type:"rerequest"}:{}),{},{return_scopes:!0}))}x&&!k&&("connected"!==(e=I).status||r(e)||!c(e,"public_profile,email")?o(e):n(e))},children:[Object(g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"#fff",className:"bi bi-facebook",viewBox:"0 0 16 16",role:"img","aria-label":"Facebook icon",children:Object(g.jsx)("path",{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"})}),Object(g.jsx)("span",{className:"fw-bold ms-2",children:"Continue with Facebook"})]}),Object(g.jsx)("div",{className:"border-bottom my-4"}),Object(g.jsx)("button",{type:"button",className:"btn btn-success btn-lg w-100 rounded-3","data-modal-id":"signUpModal",disabled:k,onClick:function(e){var t=e.target.dataset.modalId;new o.Modal(document.getElementById(t)).show()},children:Object(g.jsx)("span",{className:"fw-bold pe-none",children:"Create New Account"})})]})};a(259);var V=function(e){var t=e.setIsLoading,a=e.setCurrentUser;return Object(g.jsx)("div",{className:"container mt-4",children:Object(g.jsx)("div",{className:"row justify-content-center",children:Object(g.jsxs)("div",{className:"col-sm-10 col-md-8 col-lg-6",children:[Object(g.jsx)("h1",{className:"sign-in-h1 text-primary text-center fw-bold mb-4",children:"Odin Book"}),Object(g.jsx)("section",{children:Object(g.jsx)(q,{setIsLoading:t,setCurrentUser:a})})]})})})},Y=a(127),J=a(27),H=a.n(J),G=a(129),K=a(128),W=a.n(K);var Q=function(e){var t=e.picture;return t.isLocal?""===t.filename?"":"".concat("https://odin-book-api-60312.herokuapp.com","/images/").concat(t.filename):t.filename};var X=function(e){var t=e.post,a=Q(t);return Object(g.jsxs)("article",{className:"card mb-3",children:[Object(g.jsxs)("div",{className:"card-header",children:[Object(g.jsx)("h5",{className:"card-title",children:t.title}),Object(g.jsx)("p",{className:"card-subtitle mb-2",children:t.author.firstName+" "+t.author.lastName}),Object(g.jsx)("p",{className:"card-subtitle",children:Object(G.a)(new Date(t.updatedAt),"PPpp")})]}),a&&Object(g.jsx)(i.b,{to:"/posts/".concat(t._id),children:Object(g.jsx)("img",{src:a,className:"card-img-top post-image",alt:"Post"})}),Object(g.jsxs)("div",{className:"card-body",children:[Object(g.jsx)("p",{className:"card-text",children:t.text}),Object(g.jsxs)(i.b,{to:"/posts/".concat(t._id,"/reactions"),className:"card-link",children:[t.reactions.length," reactions"]}),Object(g.jsx)(i.b,{to:"/posts/".concat(t._id),className:"card-link",children:W()("comments",t.comments.length,!0)})]})]})};function Z(e){var t=e.posts.map((function(e){return Object(g.jsx)(X,{post:e},e._id)}));return Object(g.jsx)(g.Fragment,{children:t})}Z.propTypes={posts:H.a.array.isRequired};var $=Z;var ee=function(){var e=A(),t=Object(n.useState)(!0),a=Object(m.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)(1),i=Object(m.a)(c,2),o=i[0],l=i[1],p=Object(n.useState)([]),j=Object(m.a)(p,2),f=j[0],h=j[1],v=Object(n.useState)(void 0),x=Object(m.a)(v,2),y=x[0],N=x[1],k=Object(n.useState)(!1),S=Object(m.a)(k,2),C=S[0],F=S[1];return Object(n.useEffect)((function(){function t(){return(t=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,1===o&&r(!0),e.next=4,O("".concat("https://odin-book-api-60312.herokuapp.com","/posts?page=").concat(o,"&limit=",10));case 4:if(!(t=e.sent).err){e.next=10;break}return window.alerts([{msg:t.err.message}]),e.abrupt("return");case 10:return e.next=12,Promise.all(t.posts.map(function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("".concat("https://odin-book-api-60312.herokuapp.com","/posts/").concat(t._id,"/reactions"));case 2:if(!(a=e.sent).err){e.next=6;break}return window.alerts([{msg:a.err.message}]),e.abrupt("return");case 6:return e.next=8,O("".concat("https://odin-book-api-60312.herokuapp.com","/posts/").concat(t._id,"/comments"));case 8:if(!(n=e.sent).err){e.next=12;break}return window.alerts([{msg:n.err.message}]),e.abrupt("return");case 12:return e.abrupt("return",Object(b.a)(Object(b.a)({},t),{},{reactions:a.reactions,comments:n.comments}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:a=e.sent,h((function(e){return e.concat(a)})),N(t.totalPosts);case 15:1===o&&r(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),1===o&&r(!1),window.alerts([{msg:e.t0.message}]);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[e,o]),Object(n.useEffect)((function(){e&&"number"===typeof y&&F(f.length<y)}),[e,s,f,y]),s?Object(g.jsx)(w,{type:"border",size:"2em",classes:"position-absolute top-50 start-50 translate-middle"}):Object(g.jsx)("div",{className:"container mt-3",children:Object(g.jsx)("div",{className:"row justify-content-center",children:Object(g.jsx)("div",{className:"col-md-8",children:Object(g.jsx)("section",{children:Object(g.jsx)(Y.a,{dataLength:f.length,next:function(){l((function(e){return e+1}))},hasMore:C,loader:Object(g.jsx)("div",{className:"d-flex justify-content-center",children:Object(g.jsx)(w,{type:"border",size:"2em"})}),style:{overflow:"none"},children:Object(g.jsx)($,{posts:f})})})})})})};var te=function(){var e=Object(p.h)().userId;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h1",{children:"TODO: UsersShowView"}),Object(g.jsx)("h2",{children:e})]})};var ae=function(){var e=Object(p.g)(),t=Object(n.useState)(!0),a=Object(m.a)(t,2),s=a[0],r=a[1],c=Object(n.useState)([]),i=Object(m.a)(c,2),o=i[0],l=i[1],f=Object(n.useState)(null),v=Object(m.a)(f,2),x=v[0],y=v[1];return Object(n.useEffect)((function(){h.addListener("alerts",(function(e){var t=e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{id:Object(j.a)()})}));l(t)}))}),[]),Object(n.useEffect)((function(){window.alerts=function(e){return h.emit("alerts",e)}}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("".concat("https://odin-book-api-60312.herokuapp.com","/users/current-user"));case 3:t=e.sent,y(t.currentUser),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),y(!1),window.alerts([{msg:e.t0.message}]);case 11:r(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),s?Object(g.jsx)(w,{type:"grow",size:"3em",classes:"position-absolute top-50 start-50 translate-middle"}):Object(g.jsxs)(g.Fragment,{children:[x&&Object(g.jsx)(U,{currentUser:x,signOut:function(){localStorage.removeItem("jwt"),y(!1),e.push("/"),window.alerts([{msg:"You have successfully signed out",type:"success"}])}}),o.length>0&&Object(g.jsx)("div",{className:"container",children:Object(g.jsx)("div",{className:"row justify-content-center",children:Object(g.jsx)("div",{className:"col-md-8",children:Object(g.jsx)(N,{alerts:o,onAlertDelete:function(e){var t=o.filter((function(t){return t.id!==e}));l(t)}})})})}),Object(g.jsx)("main",{children:Object(g.jsxs)(p.d,{children:[Object(g.jsx)(p.b,{exact:!0,path:"/",children:x?Object(g.jsx)(p.a,{to:"/posts"}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(M,{setCurrentUser:y}),Object(g.jsx)(V,{setIsLoading:r,setCurrentUser:y})]})}),Object(g.jsx)(p.b,{exact:!0,path:"/posts",children:x?Object(g.jsx)(ee,{}):Object(g.jsx)(p.a,{to:"/"})}),Object(g.jsx)(p.b,{exact:!0,path:"/users/:userId",children:x?Object(g.jsx)(te,{}):Object(g.jsx)(p.a,{to:"/"})})]})})]})},ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,265)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),r(e),c(e)}))};a(260).config(),c.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(i.a,{children:Object(g.jsx)(ae,{})})}),document.getElementById("root")),ne()}},[[264,1,2]]]);
//# sourceMappingURL=main.c4b10098.chunk.js.map