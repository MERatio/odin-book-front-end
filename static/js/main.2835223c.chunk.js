(this["webpackJsonpodin-book-front-end"]=this["webpackJsonpodin-book-front-end"]||[]).push([[0],{157:function(e,t,a){},159:function(e,t,a){},166:function(e,t){},168:function(e,t){},179:function(e,t){},181:function(e,t){},208:function(e,t){},210:function(e,t){},211:function(e,t){},216:function(e,t){},218:function(e,t){},237:function(e,t){},249:function(e,t){},252:function(e,t){},259:function(e,t,a){},260:function(e,t,a){},261:function(e,t,a){},266:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(127),r=a.n(c),o=a(10),i=(a(135),a(26)),l=(a(157),a(4)),u=a.n(l),d=a(7),b=a(6),j=a(3),m=(a(159),a(8)),p=a(130),f=a(25),h=new(a.n(f).a);function O(){return(O=Object(d.a)(u.a.mark((function e(){var t,a,n,s=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",a=s.length>1&&void 0!==s[1]&&s[1],e.next=4,fetch(t,{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))}});case 4:return n=e.sent,e.abrupt("return",a?n:n.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(){return O.apply(this,arguments)},v=a(0);function g(e){var t=e.type,a=e.size,n=e.classes;return Object(v.jsx)("div",{className:n,children:Object(v.jsx)("div",{className:"spinner-".concat(t," text-primary"),style:{width:a,height:a},role:"status",children:Object(v.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}g.defaultProps={type:"border",size:"2em",classes:""};var w=g;var N=function(e){var t=e.alert,a=e.onAlertDelete;return Object(n.useEffect)((function(){var e=setTimeout((function(){return a(t.id)}),1e4);return function(){return clearTimeout(e)}}),[t,a]),Object(v.jsxs)("div",{className:"alert alert-".concat(t.type||"danger"," d-flex align-items-center alert-dismissible mb-1"),role:"alert","data-id":t.id,children:[function(e){var t=24;switch(e){case"success":return Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"currentColor",className:"bi bi-check-circle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",role:"img","aria-label":"Success:",children:Object(v.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})});case"info":return Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"currentColor",className:"bi bi-info-circle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",role:"img","aria-label":"Info:",children:Object(v.jsx)("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"})});case"warning":case"danger":default:return Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"currentColor",className:"bi bi-exclamation-circle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",role:"img","aria-label":"warning"===e?"Warning:":"Danger:",children:Object(v.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"})})}}(t.type),Object(v.jsx)("div",{children:t.msg}),Object(v.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:function(){a(t.id)}})]})};var y=function(e){var t=e.alerts,a=e.onAlertDelete;return Object(v.jsx)(v.Fragment,{children:t.map((function(e){return Object(v.jsx)(N,{alert:e,onAlertDelete:a},e.id)}))})};var k=function(e){var t=e.picture;return t.isLocal?""===t.filename?"":"".concat("https://odin-book-api-60312.herokuapp.com","/images/").concat(t.filename):t.filename},S=a(128),C=a.n(S);var I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"80",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp",n=C()(e),s="https://www.gravatar.com/avatar/".concat(n,"?s=").concat(t,"&d=").concat(a);return s};var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"80",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp",n=k(e),s=""===n?I(e.email,t,a):n;return s};var E=function(e){var t=e.currentUser;return Object(v.jsx)(m.b,{path:"/users/userId",children:function(e){var a=e.match;return Object(v.jsxs)(o.c,Object(b.a)(Object(b.a)({className:"nav-link ".concat(a?"active":"")},a&&{"aria-current":"page"}),{},{exact:!0,to:"/users/".concat(t._id),children:[Object(v.jsx)("img",{className:"rounded-circle me-2",src:_(t),alt:"Current user",width:"28",height:"28"}),Object(v.jsx)("span",{children:t.firstName})]}))}})};var F=function(e){var t=e.currentUser,a=e.signOut;return Object(v.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark sticky-top",children:Object(v.jsxs)("div",{className:"container-fluid",children:[Object(v.jsx)(o.c,{className:"navbar-brand",to:"/posts",children:"Odin Book"}),Object(v.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(v.jsx)("span",{className:"navbar-toggler-icon"})}),Object(v.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(v.jsxs)("ul",{className:"navbar-nav ms-auto mb-2 mb-sm-0",children:[Object(v.jsx)("li",{className:"nav-item me-4",children:Object(v.jsx)(E,{currentUser:t})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)("button",{type:"button",className:"btn btn-outline-light",onClick:a,children:"Sign out"})})]})})]})})},U=a(21),B=a(33);var P=function(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],s=t[1];return Object(n.useEffect)((function(){return s(!0),function(){return s(!1)}}),[]),a};function z(){return(z=Object(d.a)(u.a.mark((function e(){var t,a,n,s,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",a=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2&&void 0!==c[2]&&c[2],e.next=5,fetch(t,{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:a});case 5:return s=e.sent,e.abrupt("return",n?s:s.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(){return z.apply(this,arguments)};function L(e){var t=e.className,a=e.text,n=e.loadingText,s=e.disabled,c=e.isSubmitting;return Object(v.jsx)("button",{type:"submit",className:t,disabled:s||c,children:c?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{className:"spinner-border spinner-border-sm fw-bold",role:"status","aria-hidden":"true"}),n]}):Object(v.jsx)("span",{className:"fw-bold",children:a})})}L.defaultProps={className:"",text:"Submit",disabled:!1};var M=L;var T=function(e){var t=e.setCurrentUser,a=P(),s=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",passwordConfirmation:""}),c=Object(j.a)(s,2),r=c[0],o=c[1],l=Object(n.useState)(!1),m=Object(j.a)(l,2),p=m[0],f=m[1];function h(e){var t=e.target,a=t.name,n=t.value;o((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(B.a)({},a,n))}))}function O(e){var t=e.target,a=t.parentNode.querySelectorAll(".invalid-feedback");if(0!==a.length){t.classList.remove("is-invalid");var n,s=Object(U.a)(a);try{for(s.s();!(n=s.n()).done;){n.value.remove()}}catch(c){s.e(c)}finally{s.f()}}}function x(){var e=document.getElementById("signUpForm");if(e){var t=e.querySelectorAll(".invalid-feedback");if(0===t.length)return;var a,n=e.querySelectorAll("input"),s=Object(U.a)(n);try{for(s.s();!(a=s.n()).done;){a.value.classList.remove("is-invalid")}}catch(o){s.e(o)}finally{s.f()}var c,r=Object(U.a)(t);try{for(r.s();!(c=r.n()).done;){c.value.remove()}}catch(o){r.e(o)}finally{r.f()}}}function g(){return(g=Object(d.a)(u.a.mark((function e(n){var s,c,r,l,d,j,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){var t,a=document.getElementById("signUpForm"),n=Object(U.a)(e);try{for(n.s();!(t=n.n()).done;){var s=t.value,c=a.querySelector("input[name='".concat(s.param,"']")),r=c.parentNode;c.classList.add("is-invalid");var o=document.createElement("div");o.classList.add("invalid-feedback");var i=document.createTextNode(s.msg);o.appendChild(i),r.insertAdjacentElement("beforeend",o)}}catch(l){n.e(l)}finally{n.f()}},n.preventDefault(),x(),f(!0),e.prev=4,e.next=7,A("".concat("https://odin-book-api-60312.herokuapp.com","/users"),new FormData(n.target));case 7:if(c=e.sent,f(!1),!c.err){e.next=13;break}window.alerts([{msg:c.err.message}]),e.next=48;break;case 13:if(!c.errors){e.next=43;break}r=!1,l=!1,d=Object(U.a)(c.errors),e.prev=17,d.s();case 19:if((j=d.n()).done){e.next=31;break}m=j.value,e.t0=m.param,e.next="email"===e.t0?24:"picture"===e.t0?26:28;break;case 24:return r=!0,e.abrupt("break",29);case 26:return l=!0,e.abrupt("break",29);case 28:return e.abrupt("break",29);case 29:e.next=19;break;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(17),d.e(e.t1);case 36:return e.prev=36,d.f(),e.finish(36);case 39:a&&o(Object(b.a)(Object(b.a)({firstName:c.user.firstName,lastName:c.user.lastName,email:r?"":c.user.email},l&&{picture:""}),{},{password:"",passwordConfirmation:""})),s(c.errors),e.next=48;break;case 43:i.Modal.getInstance(document.getElementById("signUpModal")).hide(),localStorage.setItem("jwt",c.jwt),t(c.user),window.alerts([{msg:"You have successfuly signed up",type:"success"}]);case 48:e.next=54;break;case 50:e.prev=50,e.t2=e.catch(4),f(!1),window.alerts([{msg:e.t2.message}]);case 54:case"end":return e.stop()}}),e,null,[[4,50],[17,33,36,39]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=document.getElementById("signUpModal"),t=document.getElementById("picture");e.addEventListener("hidden.bs.modal",(function(e){x(),o({firstName:"",lastName:"",email:"",picture:"",password:"",passwordConfirmation:""}),t.value=""}))}),[]),Object(v.jsxs)("form",{onSubmit:function(e){return g.apply(this,arguments)},id:"signUpForm",children:[Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"First name","aria-label":"First name",name:"firstName",value:r.firstName,onChange:h,onFocus:O})}),Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"Last name","aria-label":"Last name",name:"lastName",value:r.lastName,onChange:h,onFocus:O})}),Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("input",{type:"text",className:"form-control",placeholder:"Email","aria-label":"Email",name:"email",value:r.email,onChange:h,onFocus:O})}),Object(v.jsxs)("div",{className:"input-group mb-3",children:[Object(v.jsx)("label",{className:"input-group-text",htmlFor:"picture",children:"Upload picture (optional)"}),Object(v.jsx)("input",{type:"file",accept:"image/*",className:"form-control",id:"picture",name:"picture",onFocus:O})]}),Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("input",{type:"password",className:"form-control",placeholder:"Password","aria-label":"Password",name:"password",value:r.password,onChange:h,onFocus:O})}),Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("input",{type:"password",className:"form-control",placeholder:"Password confirmation","aria-label":"Password confirmation",name:"passwordConfirmation",value:r.passwordConfirmation,onChange:h,onFocus:O})}),Object(v.jsx)(M,{className:"btn btn-success btn-lg w-100 rounded-3",text:"Sign Up",loadingText:"Signing Up...",isSubmitting:p})]})};var D=function(e){var t=e.setCurrentUser;return Object(v.jsx)("div",{className:"modal fade",id:"signUpModal",tabIndex:"-1","aria-labelledby":"signUpModalLabel","aria-hidden":"true",children:Object(v.jsx)("div",{className:"modal-dialog",children:Object(v.jsxs)("div",{className:"modal-content",children:[Object(v.jsxs)("div",{className:"modal-header",children:[Object(v.jsx)("h3",{className:"modal-title",id:"signUpModalLabel",children:"Sign Up"}),Object(v.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close","data-modal-id":"signUpModal",onClick:function(e){var t=e.target.dataset.modalId;i.Modal.getInstance(document.getElementById(t)).hide()}})]}),Object(v.jsx)("div",{className:"modal-body",children:Object(v.jsx)(T,{setCurrentUser:t})})]})})})};function R(){return(R=Object(d.a)(u.a.mark((function e(){var t,a,n,s,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:"",a=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2&&void 0!==c[2]&&c[2],e.next=5,fetch(t,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("jwt"))},body:JSON.stringify(a)});case 5:return s=e.sent,e.abrupt("return",n?s:s.json());case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(){return R.apply(this,arguments)};(function(){window.fbAsyncInit=function(){window.FB.init({appId:"".concat("945137412920931"),cookie:!0,xfbml:!0,version:"v10.0"}),window.FB.AppEvents.logPageView()},function(e,t,a){var n,s=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/en_US/sdk.js",s.parentNode.insertBefore(n,s))}(document,"script","facebook-jssdk")})();var H=function(e){var t=e.setIsLoading,a=e.setCurrentUser,s=P(),c=Object(n.useState)({email:"",password:""}),r=Object(j.a)(c,2),o=r[0],l=r[1],m=Object(n.useState)(!1),p=Object(j.a)(m,2),f=p[0],h=p[1],O=Object(n.useState)(void 0),x=Object(j.a)(O,2),g=x[0],w=x[1],N=Object(n.useState)(!1),y=Object(j.a)(N,2),k=y[0],S=y[1],C=Object(n.useState)({}),I=Object(j.a)(C,2),_=I[0],E=I[1];function F(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(b.a)(Object(b.a)({},e),{},Object(B.a)({},a,n))}))}function z(){return(z=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.preventDefault(),h(!0),e.next=5,q("".concat("https://odin-book-api-60312.herokuapp.com","/auth/local"),o);case 5:n=e.sent,h(!1),n.err?(s&&l((function(e){return Object(b.a)(Object(b.a)({},e),{},{password:""})})),window.alerts([{msg:n.err.message}])):(localStorage.setItem("jwt",n.jwt),a(n.currentUser),window.alerts([{msg:"You have successfuly signed in",type:"success"}])),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),h(!1),window.alerts([{msg:e.t0.message}]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){var e=setTimeout((function(){window.FB?(w(!0),window.FB.getLoginStatus((function(e){E(e)}))):(w(!1),window.alerts([{msg:"Facebook button is disabled because the Facebook SDK is blocked.",type:"info"}]))}),1500);return function(){return clearTimeout(e)}}),[]),Object(v.jsxs)("form",{onSubmit:function(e){return z.apply(this,arguments)},className:"p-4 bg-white rounded-3 shadow",children:[Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"Email","aria-label":"Email",disabled:k,name:"email",value:o.email,onChange:F})}),Object(v.jsx)("div",{className:"mb-3",children:Object(v.jsx)("input",{type:"password",className:"form-control form-control-lg",placeholder:"Password","aria-label":"Password",disabled:k,name:"password",value:o.password,onChange:F})}),Object(v.jsx)(M,{className:"btn btn-primary btn-lg w-100 rounded-3 mb-2",text:"Sign In",loadingText:"Signing In...",disabled:k,isSubmitting:f}),Object(v.jsxs)("button",{type:"button",className:"btn btn-primary btn-lg w-100 rounded-3",disabled:!g||k,onClick:function(){var e;function n(e){return s.apply(this,arguments)}function s(){return(s=Object(d.a)(u.a.mark((function e(n){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.prev=1,e.next=4,q("".concat("https://odin-book-api-60312.herokuapp.com","/auth/facebook"),{userAccessToken:n.authResponse.accessToken},!0);case 4:return s=e.sent,e.next=7,s.json();case 7:(c=e.sent).err?window.alerts([{msg:c.err.message}]):(localStorage.setItem("jwt",c.jwt),a(c.currentUser),window.alerts([{msg:"You have successfuly ".concat(200===s.status?"signed in":"signed up"),type:"success"}])),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),window.alerts([{msg:e.t0.message}]);case 14:t(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function c(e){return!(!e||!e.data_access_expiration_time)&&1e3*e.authResponse.data_access_expiration_time<=Date.now()}function r(e,t){if(e&&e.authResponse&&e.authResponse.grantedScopes){var a,n=e.authResponse.grantedScopes.split(","),s=t.split(","),c=Object(U.a)(s);try{for(c.s();!(a=c.n()).done;){var r=a.value;if(!n.includes(r))return!1}}catch(o){c.e(o)}finally{c.f()}return!0}return!1}function o(e,t){if(e&&e.authResponse&&e.authResponse.grantedScopes){var a,n=e.authResponse.grantedScopes.split(","),s=t.split(","),c="",r=Object(U.a)(s);try{for(r.s();!(a=r.n()).done;){var o=a.value;n.includes(o)||(c.length>0&&(c+=","),c+=o)}}catch(i){r.e(i)}finally{r.f()}return c}return t}function i(e){S(!0),window.FB.login((function(e){S(!1),E(e),function(e){"connected"===e.status&&(c(e)||!r(e,"public_profile,email")?window.alerts([{msg:"Facebook email is required. Please select the Facebook button again.",type:"info"}]):n(e))}(e)}),Object(b.a)(Object(b.a)({scope:o(e,"public_profile,email")},"connected"===e.status?c(e)?{auth_type:"reauthorize"}:r(e,"public_profile,email")?{}:{auth_type:"rerequest"}:{}),{},{return_scopes:!0}))}g&&!k&&("connected"!==(e=_).status||c(e)||!r(e,"public_profile,email")?i(e):n(e))},children:[Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"#fff",className:"bi bi-facebook",viewBox:"0 0 16 16",role:"img","aria-label":"Facebook icon",children:Object(v.jsx)("path",{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"})}),Object(v.jsx)("span",{className:"fw-bold ms-2",children:"Continue with Facebook"})]}),Object(v.jsx)("div",{className:"border-bottom my-4"}),Object(v.jsx)("button",{type:"button",className:"btn btn-success btn-lg w-100 rounded-3","data-modal-id":"signUpModal",disabled:k,onClick:function(e){var t=e.target.dataset.modalId;new i.Modal(document.getElementById(t)).show()},children:Object(v.jsx)("span",{className:"fw-bold pe-none",children:"Create New Account"})})]})};a(259);var V=function(e){var t=e.setIsLoading,a=e.setCurrentUser;return Object(v.jsx)("div",{className:"container mt-4",children:Object(v.jsx)("div",{className:"row justify-content-center",children:Object(v.jsxs)("div",{className:"col-sm-10 col-md-8 col-lg-6",children:[Object(v.jsx)("h1",{className:"sign-in-h1 text-primary text-center fw-bold mb-4",children:"Odin Book"}),Object(v.jsx)("section",{children:Object(v.jsx)(H,{setIsLoading:t,setCurrentUser:a})})]})})})},Y=a(34),J=a(27),G=a.n(J),K=a(47),W=a(46),Q=a.n(W);var X=function(e){return e&&e._id?e.firstName+" "+e.lastName:""};a(260);var Z=function(e){var t=e.post,a=k(t),n=k(t.author);return Object(v.jsxs)("article",{className:"card mb-3",children:[Object(v.jsxs)("div",{className:"d-flex align-items-center p-3 pb-2",children:[Object(v.jsx)(o.b,{to:"/users/".concat(t.author._id),children:Object(v.jsx)("img",{src:n,className:"img-fluid rounded-circle me-2 author-picture",alt:"Post author"})}),Object(v.jsxs)("div",{children:[Object(v.jsx)(o.b,{to:"/users/".concat(t.author._id),className:"text-dark fw-bold h5 author-link",children:X(t.author)}),Object(v.jsx)("p",{className:"card-subtitle",children:Object(K.a)(new Date(t.updatedAt),"PPpp")})]})]}),Object(v.jsx)("div",{className:"px-3 pb-2",children:Object(v.jsx)("p",{className:"mb-0",children:t.text})}),a&&Object(v.jsx)(o.b,{to:"/posts/".concat(t._id),children:Object(v.jsx)("img",{src:a,className:"card-img-top post-image",alt:"Post"})}),Object(v.jsxs)("div",{className:"p-3",children:[Object(v.jsxs)(o.b,{to:"/posts/".concat(t._id,"/reactions"),className:"card-link",children:[t.totalReactions," reactions"]}),Object(v.jsx)(o.b,{to:"/posts/".concat(t._id),className:"card-link",children:Q()("comments",t.totalComments,!0)})]})]})};function $(e){var t=e.posts.map((function(e){return Object(v.jsx)(Z,{post:e},e._id)}));return Object(v.jsx)(v.Fragment,{children:t})}$.propTypes={posts:G.a.array.isRequired};var ee=$;var te=function(){var e=P(),t=Object(n.useState)(!0),a=Object(j.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(1),o=Object(j.a)(r,2),i=o[0],l=o[1],m=Object(n.useState)([]),p=Object(j.a)(m,2),f=p[0],h=p[1],O=Object(n.useState)(void 0),g=Object(j.a)(O,2),N=g[0],y=g[1],k=Object(n.useState)(!1),S=Object(j.a)(k,2),C=S[0],I=S[1];return Object(n.useEffect)((function(){function t(){return(t=Object(d.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x("".concat("https://odin-book-api-60312.herokuapp.com","/posts?page=").concat(i,"&limit=10"));case 3:if(!(a=t.sent).err){t.next=8;break}window.alerts([{msg:a.err.message}]),t.next=12;break;case 8:return t.next=10,Promise.all(a.posts.map(function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("".concat("https://odin-book-api-60312.herokuapp.com","/posts/").concat(t._id,"/reactions?noDocs=true"));case 2:if(!(a=e.sent).err){e.next=6;break}return window.alerts([{msg:a.err.message}]),e.abrupt("return");case 6:return e.next=8,x("".concat("https://odin-book-api-60312.herokuapp.com","/posts/").concat(t._id,"/comments?noDocs=true"));case 8:if(!(n=e.sent).err){e.next=12;break}return window.alerts([{msg:n.err.message}]),e.abrupt("return");case 12:return e.abrupt("return",Object(b.a)(Object(b.a)({},t),{},{totalReactions:a.totalReactions,totalComments:n.totalComments}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:n=t.sent,e&&(h((function(e){return e.concat(n)})),y(a.totalPosts));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),window.alerts([{msg:t.t0.message}]);case 17:e&&1===i&&c(!1);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[e,i]),Object(n.useEffect)((function(){e&&"number"===typeof N&&I(f.length<N)}),[e,f,N]),s?Object(v.jsx)(w,{type:"border",size:"2em",classes:"position-absolute top-50 start-50 translate-middle"}):Object(v.jsx)("div",{className:"container mt-3",children:Object(v.jsx)("div",{className:"row justify-content-center",children:Object(v.jsx)("section",{className:"col-md-8",children:Object(v.jsx)(Y.a,{dataLength:f.length,next:function(){l((function(e){return e+1}))},hasMore:C,loader:Object(v.jsx)("div",{className:"d-flex justify-content-center",children:Object(v.jsx)(w,{type:"border",size:"2em"})}),style:{overflow:"none"},children:Object(v.jsx)(ee,{posts:f})})})})})};var ae=function(){return Object(v.jsx)("h1",{className:"text-center mt-5",children:"404 Not Found"})};var ne=function(e){var t=e.comments;return t.length>0?Object(v.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(v.jsxs)("li",{className:"list-group-item",children:[Object(v.jsx)("p",{className:"h6 mb-1",children:X(e.author)}),Object(v.jsx)("p",{className:"text-muted mb-2",children:Object(K.a)(new Date(e.createdAt),"PPpp")}),Object(v.jsx)("p",{className:"mb-2",children:e.text})]},e._id)}))}):null};var se=function(){var e=Object(m.h)().postId,t=P(),a=Object(n.useState)(!1),s=Object(j.a)(a,2),c=s[0],r=s[1],o=Object(n.useState)(!0),i=Object(j.a)(o,2),l=i[0],p=i[1],f=Object(n.useState)({}),h=Object(j.a)(f,2),O=h[0],g=h[1],N=Object(n.useState)(void 0),y=Object(j.a)(N,2),k=y[0],S=y[1],C=Object(n.useState)(!0),I=Object(j.a)(C,2),_=I[0],E=I[1],F=Object(n.useState)(1),U=Object(j.a)(F,2),B=U[0],z=U[1],A=Object(n.useState)([]),L=Object(j.a)(A,2),M=L[0],T=L[1],D=Object(n.useState)(void 0),R=Object(j.a)(D,2),q=R[0],H=R[1],V=Object(n.useState)(!1),J=Object(j.a)(V,2),G=J[0],K=J[1];return Object(n.useEffect)((function(){function a(){return(a=Object(d.a)(u.a.mark((function a(){var n,s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,x("".concat("https://odin-book-api-60312.herokuapp.com","/posts/").concat(e),!0);case 3:return 404===(n=a.sent).status&&t&&r(!0),a.next=7,n.json();case 7:(s=a.sent).err?window.alerts([{msg:s.err.message}]):t&&g(s.post),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),window.alerts([{msg:a.t0.message}]);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})))).apply(this,arguments)}t&&function(){a.apply(this,arguments)}()}),[t,e]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("".concat("https://odin-book-api-60312.herokuapp.com","/posts/").concat(O._id,"/reactions?noDocs=true"));case 3:(a=e.sent).err?window.alerts([{msg:a.err.message}]):S(a.totalReactions),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.alerts([{msg:e.t0.message}]);case 10:t&&p(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t&&O._id&&function(){e.apply(this,arguments)}()}),[t,O]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("".concat("https://odin-book-api-60312.herokuapp.com","/posts/").concat(O._id,"/comments?page=").concat(B,"&limit=10"));case 3:(a=e.sent).err?window.alerts([{msg:a.err.message}]):t&&(T((function(e){return e.concat(a.comments)})),H(a.totalComments)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.alerts([{msg:e.t0.message}]);case 10:t&&1===B&&E(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}t&&O._id&&function(){e.apply(this,arguments)}()}),[t,O,B]),Object(n.useEffect)((function(){t&&"number"===typeof q&&K(M.length<q)}),[t,M,q]),l?Object(v.jsx)(w,{type:"border",size:"2em",classes:"position-absolute top-50 start-50 translate-middle"}):c?Object(v.jsx)(ae,{}):Object(v.jsx)("div",{className:"container mt-3",children:Object(v.jsx)("div",{className:"row justify-content-center",children:Object(v.jsxs)("section",{className:"col-md-8",children:[Object(v.jsx)(Z,{post:Object(b.a)(Object(b.a)({},O),{},{totalReactions:k,totalComments:q})}),_?Object(v.jsx)("div",{className:"position-relative",style:{minHeight:"10em"},children:Object(v.jsx)(w,{type:"border",size:"2em",classes:"position-absolute top-50 start-50 translate-middle"})}):Object(v.jsx)(Y.a,{dataLength:M.length,next:function(){z((function(e){return e+1}))},hasMore:G,loader:Object(v.jsx)("div",{className:"d-flex justify-content-center",children:Object(v.jsx)(w,{type:"border",size:"2em"})}),style:{overflow:"none"},children:Object(v.jsx)(ne,{comments:M})})]})})})};var ce=function(e){var t=e.user;return Object(v.jsx)("div",{className:"user-picture-container",children:Object(v.jsx)("img",{src:_(t),alt:"User",className:"img-thumbnail user-picture"})})};var re=function(e){var t=e.userId,a=e.friends,n=e.totalFriends;return Object(v.jsxs)("div",{className:"position-relative user-friends",children:[Object(v.jsx)("h2",{className:"h4 ms-4 ms-md-0 mb-4 mb-md-2",children:Object(v.jsx)(o.b,{to:"/users/".concat(t,"/friends"),children:Q()("friend",n||0,!0)})}),Object(v.jsx)("div",{className:"text-center d-none d-md-grid user-friends-grid",children:a.slice(0,9).map((function(e){var t=X(e);return Object(v.jsx)(o.b,{to:"/users/".concat(e._id),className:"user-friends-grid-item",children:Object(v.jsxs)("figure",{className:"mb-0",children:[Object(v.jsx)("div",{className:"user-friends-grid-item-image-container",children:Object(v.jsx)("img",{src:_(e),alt:t,className:"img-fluid user-friends-grid-item-image"})}),Object(v.jsx)("figcaption",{children:t})]})},e._id)}))})]})};var oe=function(e){var t=e.posts,a=e.hasMore,n=e.incrementCurrentPage;return Object(v.jsx)("section",{className:"position-relative",children:Object(v.jsx)(Y.a,{dataLength:t.length,next:n,hasMore:a,loader:Object(v.jsx)("div",{className:"d-flex justify-content-center",children:Object(v.jsx)(w,{type:"border",size:"2em"})}),style:{overflow:"none"},children:Object(v.jsx)(ee,{posts:t})})})};a(261);var ie=function(e){var t=Object(m.h)().userId,a=P(),s=Object(n.useState)(!1),c=Object(j.a)(s,2),r=c[0],o=c[1],i=Object(n.useState)(!0),l=Object(j.a)(i,2),p=l[0],f=l[1],h=Object(n.useState)({}),O=Object(j.a)(h,2),g=O[0],N=O[1],y=Object(n.useState)(!0),k=Object(j.a)(y,2),S=k[0],C=k[1],I=Object(n.useState)([]),_=Object(j.a)(I,2),E=_[0],F=_[1],U=Object(n.useState)(void 0),B=Object(j.a)(U,2),z=B[0],A=B[1],L=Object(n.useState)(!0),M=Object(j.a)(L,2),T=M[0],D=M[1],R=Object(n.useState)(1),q=Object(j.a)(R,2),H=q[0],V=q[1],Y=Object(n.useState)([]),J=Object(j.a)(Y,2),G=J[0],K=J[1],W=Object(n.useState)(void 0),Q=Object(j.a)(W,2),Z=Q[0],$=Q[1],ee=Object(n.useState)(!1),te=Object(j.a)(ee,2),ne=te[0],se=te[1];return Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("".concat("https://odin-book-api-60312.herokuapp.com","/users/").concat(t),!0);case 3:if(404!==(n=e.sent).status){e.next=8;break}a&&o(!0),e.next=12;break;case 8:return e.next=10,n.json();case 10:(s=e.sent).err?window.alerts([{msg:s.err.message}]):a&&N(s.user);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),window.alerts([{msg:e.t0.message}]);case 17:a&&f(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}a&&function(){e.apply(this,arguments)}()}),[a,t]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("".concat("https://odin-book-api-60312.herokuapp.com","/users/").concat(g._id,"/friends?page=1&limit=10"));case 3:(t=e.sent).err?window.alerts([{msg:t.err.message}]):a&&(F(t.users),A(t.totalUsers)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.alerts([{msg:e.t0.message}]);case 10:a&&C(!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}a&&g._id&&function(){e.apply(this,arguments)}()}),[a,g]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("".concat("https://odin-book-api-60312.herokuapp.com","/users/").concat(g._id,"/posts?page=").concat(H,"&limit=10"));case 3:if(!(t=e.sent).err){e.next=8;break}window.alerts([{msg:t.err.message}]),e.next=12;break;case 8:return e.next=10,Promise.all(t.posts.map(function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("".concat("https://odin-book-api-60312.herokuapp.com","/posts/").concat(t._id,"/reactions?noDocs=true"));case 2:if(!(a=e.sent).err){e.next=6;break}return window.alerts([{msg:a.err.message}]),e.abrupt("return");case 6:return e.next=8,x("".concat("https://odin-book-api-60312.herokuapp.com","/posts/").concat(t._id,"/comments?noDocs=true"));case 8:if(!(n=e.sent).err){e.next=12;break}return window.alerts([{msg:n.err.message}]),e.abrupt("return");case 12:return e.abrupt("return",Object(b.a)(Object(b.a)({},t),{},{totalReactions:a.totalReactions,totalComments:n.totalComments}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:n=e.sent,a&&(K((function(e){return e.concat(n)})),$(t.totalPosts));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),window.alerts([{msg:e.t0.message}]);case 17:a&&1===H&&D(!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}a&&g._id&&function(){e.apply(this,arguments)}()}),[a,g,H]),Object(n.useEffect)((function(){"number"===typeof Z&&a&&se(G.length<Z)}),[a,G,Z]),p?Object(v.jsx)(w,{type:"border",size:"2em",classes:"position-absolute top-50 start-50 translate-middle"}):r?Object(v.jsx)(ae,{}):Object(v.jsx)("div",{className:"container mt-3",children:Object(v.jsxs)("div",{className:"row",children:[Object(v.jsxs)("div",{className:"col-md-4",children:[Object(v.jsx)(ce,{user:g}),Object(v.jsx)("h1",{className:"text-center",children:X(g)}),S?Object(v.jsx)("div",{className:"position-relative",style:{minHeight:"10em"},children:Object(v.jsx)(w,{type:"border",size:"2em",classes:"position-absolute top-50 start-50 translate-middle"})}):Object(v.jsx)(re,{userId:g._id,friends:E,totalFriends:z})]}),Object(v.jsx)("div",{className:"col-md-8",children:T?Object(v.jsx)("div",{className:"position-relative",style:{minHeight:"10em"},children:Object(v.jsx)(w,{type:"border",size:"2em",classes:"position-absolute top-50 start-50 translate-middle"})}):Object(v.jsx)(oe,{posts:G,hasMore:ne,incrementCurrentPage:function(){V((function(e){return e+1}))}})})]})})};var le=function(){var e=Object(m.g)(),t=Object(n.useState)(!0),a=Object(j.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)([]),o=Object(j.a)(r,2),i=o[0],l=o[1],f=Object(n.useState)(null),O=Object(j.a)(f,2),g=O[0],N=O[1];return Object(n.useEffect)((function(){h.addListener("alerts",(function(e){var t=e.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{id:Object(p.a)()})}));l(t)}))}),[]),Object(n.useEffect)((function(){window.alerts=function(e){return h.emit("alerts",e)}}),[]),Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("".concat("https://odin-book-api-60312.herokuapp.com","/users/current-user"));case 3:t=e.sent,N(t.currentUser),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),N(!1),window.alerts([{msg:e.t0.message}]);case 11:c(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),s?Object(v.jsx)(w,{type:"grow",size:"3em",classes:"position-absolute top-50 start-50 translate-middle"}):Object(v.jsxs)(v.Fragment,{children:[g&&Object(v.jsx)(F,{currentUser:g,signOut:function(){localStorage.removeItem("jwt"),N(!1),e.push("/"),window.alerts([{msg:"You have successfully signed out",type:"success"}])}}),i.length>0&&Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"row justify-content-center",children:Object(v.jsx)("div",{className:"col-md-8",children:Object(v.jsx)(y,{alerts:i,onAlertDelete:function(e){var t=i.filter((function(t){return t.id!==e}));l(t)}})})})}),Object(v.jsx)("main",{children:Object(v.jsxs)(m.d,{children:[Object(v.jsx)(m.b,{exact:!0,path:"/",children:g?Object(v.jsx)(m.a,{to:"/posts"}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(D,{setCurrentUser:N}),Object(v.jsx)(V,{setIsLoading:c,setCurrentUser:N})]})}),Object(v.jsx)(m.b,{exact:!0,path:"/posts",children:g?Object(v.jsx)(te,{}):Object(v.jsx)(m.a,{to:"/"})}),Object(v.jsx)(m.b,{exact:!0,path:"/posts/:postId",render:function(e){return g?Object(v.jsx)(se,Object(b.a)({},e),e.match.params.postId):Object(v.jsx)(m.a,{to:"/"})}}),Object(v.jsx)(m.b,{exact:!0,path:"/users/:userId",render:function(e){return g?Object(v.jsx)(ie,Object(b.a)({},e),e.match.params.userId):Object(v.jsx)(m.a,{to:"/"})}}),Object(v.jsx)(m.b,{children:Object(v.jsx)(ae,{})})]})})]})},ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,267)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};a(262).config(),r.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(o.a,{children:Object(v.jsx)(le,{})})}),document.getElementById("root")),ue()}},[[266,1,2]]]);
//# sourceMappingURL=main.2835223c.chunk.js.map