{"version":3,"sources":["utils/bus.js","lib/getData.js","components/BootstrapSpinner.js","components/Alert.js","components/Alerts.js","lib/getPictureLinkOf.js","lib/getGravatarImage.js","lib/getUserPictureLink.js","components/UsersShowNavbarLink.js","components/Navbar.js","hooks/useIsMounted.js","lib/postMultipartData.js","components/SubmitBtn.js","components/SignUpForm.js","components/SignUpModal.js","lib/postData.js","configs/facebookSdkConfig.js","components/SignInForm.js","views/SignInView.js","lib/getUserFullName.js","components/PostCard.js","components/PostsCards.js","views/PostsIndexView.js","views/NotFoundView.js","components/Comments.js","views/PostsShowView.js","components/UserPicture.js","components/UserFriends.js","components/UserPosts.js","views/UsersShowView.js","App.js","reportWebVitals.js","index.js"],"names":["EventEmitter","a","url","getResponse","fetch","method","headers","Accept","Authorization","localStorage","getItem","response","json","getData","BootstrapSpinner","type","size","classes","className","style","width","height","role","defaultProps","Alert","alert","onAlertDelete","useEffect","timeoutId","setTimeout","id","clearTimeout","data-id","xmlns","fill","viewBox","aria-label","d","determineAlertIcon","msg","onClick","Alerts","alerts","map","getPictureLinkOf","resource","picture","isLocal","filename","process","getGravatarImage","email","defaultImage","hash","md5","getUserPictureLink","user","pictureLink","userPictureLink","UsersShowNavbarLink","currentUser","path","children","match","exact","to","_id","src","alt","firstName","Navbar","signOut","data-bs-toggle","data-bs-target","aria-controls","aria-expanded","useIsMounted","useState","isMounted","setIsMouted","formData","body","postMultipartData","SubmitBtn","text","loadingText","disabled","isSubmitting","aria-hidden","SignUpForm","setCurrentUser","lastName","password","passwordConfirmation","state","setState","setIsSubmitting","handleInputChange","e","target","name","value","prevState","handleInputFocus","input","invalidFeedbackDivs","parentNode","querySelectorAll","length","classList","remove","removeFormErrors","signUpForm","document","getElementById","inputs","addFormErrors","errors","error","querySelector","param","formGroup","add","invalidFeedbackDiv","createElement","invalidFeedbackDivText","createTextNode","appendChild","insertAdjacentElement","preventDefault","FormData","data","err","window","message","isEmailErrorIncluded","isPictureErrorIncluded","Modal","getInstance","hide","setItem","jwt","signUpModal","pictureInput","addEventListener","onSubmit","placeholder","onChange","onFocus","htmlFor","accept","SignUpModal","tabIndex","aria-labelledby","data-modal-id","modalId","dataset","JSON","stringify","postData","fbAsyncInit","FB","init","appId","cookie","xfbml","version","AppEvents","logPageView","s","js","fjs","getElementsByTagName","insertBefore","facebookSdkConfig","SignInForm","setIsLoading","undefined","isFacebookSdkLoaded","setIsFacebookSdkLoaded","isFacebookPopupOpen","setIsFacebookLPopupOpen","facebookResponse","setFacebookResponse","getLoginStatus","sendAccessTokenToApi","userAccessToken","authResponse","accessToken","postResponse","status","isDataAccessExpired","data_access_expiration_time","Date","now","isScopesGranted","scopes","grantedScopes","split","scopesArr","scope","includes","missingGrantedScopes","notGrantedScopes","openFacebookPopup","login","handleFacebookPopupResponse","auth_type","return_scopes","show","SignIn","getUserFullName","PostCard","post","postPicture","authorPicture","author","format","updatedAt","totalReactions","pluralize","totalComments","PostsCards","postsCards","posts","propTypes","PropTypes","array","isRequired","PostsIndexView","isInitialPostsLoading","setIsInitialPostsLoading","currentPage","setCurrentPage","setPosts","totalPosts","setTotalPosts","hasMore","setHasMore","Promise","all","reactionsData","commentsData","prevPosts","concat","fetchAndSetPosts","dataLength","next","prevCurrentPage","loader","overflow","NotFoundView","Comments","comments","comment","createdAt","PostsShowView","postId","useParams","is404","setIs404","isPostLoading","setIsPostLoading","setPost","setTotalReactions","isInitialCommentsLoading","setIsInitialCommentsLoading","currentCommentsPage","setCurrentCommentsPage","setComments","setTotalComments","hasMoreComments","setHasMoreComments","fetchAndSetPost","fetchAndSetTotalReactions","prevComments","fetchAndSetComments","minHeight","prevCurrentCommentsPage","UserPicture","UserFriends","userId","friends","totalFriends","slice","friend","userFullName","UserPosts","incrementCurrentPage","UsersShowView","props","isUserLoading","setIsUserLoading","setUser","isFriendsLoading","setIsFriendsLoading","setFriends","setTotalFriends","fetchAndSetUser","users","totalUsers","fetchAndSetFriends","App","history","useHistory","isLoading","setAlerts","bus","addListener","alertsWithId","nanoid","emit","fetchAndSetCurrentUser","removeItem","push","alertId","newAlerts","filter","SignInView","render","params","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","require","config","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.2835223c.chunk.js","sourcesContent":["import EventEmitter from 'events';\n\nexport default new EventEmitter();\n","async function getData(url = '', getResponse = false) {\n\tconst response = await fetch(url, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\tAuthorization: `Bearer ${localStorage.getItem('jwt')}`,\n\t\t},\n\t});\n\treturn getResponse ? response : response.json();\n}\n\nexport default getData;\n","import PropTypes from 'prop-types';\n\nfunction BootstrapSpinner({ type, size, classes }) {\n\treturn (\n\t\t<div className={classes}>\n\t\t\t<div\n\t\t\t\tclassName={`spinner-${type} text-primary`}\n\t\t\t\tstyle={{ width: size, height: size }}\n\t\t\t\trole=\"status\"\n\t\t\t>\n\t\t\t\t<span className=\"visually-hidden\">Loading...</span>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nBootstrapSpinner.defaultProps = {\n\ttype: 'border',\n\tsize: '2em',\n\tclasses: '',\n};\n\nBootstrapSpinner.propTypes = {\n\ttype: PropTypes.string.isRequired,\n\tsize: PropTypes.string.isRequired,\n\tclasses: PropTypes.string.isRequired,\n};\n\nexport default BootstrapSpinner;\n","import { useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Alert({ alert, onAlertDelete }) {\n\tfunction determineAlertIcon(type) {\n\t\tconst size = 24;\n\t\tswitch (type) {\n\t\t\tcase 'success':\n\t\t\t\treturn (\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\twidth={size}\n\t\t\t\t\t\theight={size}\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclassName=\"bi bi-check-circle-fill flex-shrink-0 me-2\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\taria-label=\"Success:\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t);\n\t\t\tcase 'info':\n\t\t\t\treturn (\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\twidth={size}\n\t\t\t\t\t\theight={size}\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclassName=\"bi bi-info-circle-fill flex-shrink-0 me-2\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\taria-label=\"Info:\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<path d=\"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t);\n\t\t\tcase 'warning':\n\t\t\tcase 'danger':\n\t\t\tdefault:\n\t\t\t\treturn (\n\t\t\t\t\t<svg\n\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\twidth={size}\n\t\t\t\t\t\theight={size}\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tclassName=\"bi bi-exclamation-circle-fill flex-shrink-0 me-2\"\n\t\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\taria-label={type === 'warning' ? 'Warning:' : 'Danger:'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z\" />\n\t\t\t\t\t</svg>\n\t\t\t\t);\n\t\t}\n\t}\n\tfunction handleAlertDelete() {\n\t\tonAlertDelete(alert.id);\n\t}\n\n\t// Delete alert after 4 sec.\n\t// Timeout will reset if an alert is deleted, because of rerender.\n\tuseEffect(() => {\n\t\tconst timeoutId = setTimeout(() => onAlertDelete(alert.id), 10000);\n\t\treturn () => clearTimeout(timeoutId);\n\t}, [alert, onAlertDelete]);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`alert alert-${\n\t\t\t\talert.type || 'danger'\n\t\t\t} d-flex align-items-center alert-dismissible mb-1`}\n\t\t\trole=\"alert\"\n\t\t\tdata-id={alert.id}\n\t\t>\n\t\t\t{determineAlertIcon(alert.type)}\n\t\t\t<div>{alert.msg}</div>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName=\"btn-close\"\n\t\t\t\taria-label=\"Close\"\n\t\t\t\tonClick={handleAlertDelete}\n\t\t\t></button>\n\t\t</div>\n\t);\n}\n\nAlert.propTypes = {\n\talert: PropTypes.object.isRequired,\n\tonAlertDelete: PropTypes.func.isRequired,\n};\n\nexport default Alert;\n","import PropTypes from 'prop-types';\nimport Alert from './Alert';\n\nfunction Alerts({ alerts, onAlertDelete }) {\n\treturn (\n\t\t<>\n\t\t\t{alerts.map((alert) => (\n\t\t\t\t<Alert key={alert.id} alert={alert} onAlertDelete={onAlertDelete} />\n\t\t\t))}\n\t\t</>\n\t);\n}\n\nAlerts.propTypes = {\n\talerts: PropTypes.array.isRequired,\n\tonAlertDelete: PropTypes.func.isRequired,\n};\n\nexport default Alerts;\n","function getPictureLinkOf(resource) {\n\tconst picture = resource.picture;\n\tconst pictureLink = picture.isLocal\n\t\t? picture.filename === ''\n\t\t\t? ''\n\t\t\t: `${process.env.REACT_APP_API_URL}/images/${picture.filename}`\n\t\t: picture.filename;\n\treturn pictureLink;\n}\n\nexport default getPictureLinkOf;\n","import md5 from 'crypto-js/md5';\n\nfunction getGravatarImage(email, size = '80', defaultImage = 'mp') {\n\tconst hash = md5(email);\n\tconst url = `https://www.gravatar.com/avatar/${hash}?s=${size}&d=${defaultImage}`;\n\treturn url;\n}\n\nexport default getGravatarImage;\n","import getPictureLinkOf from './getPictureLinkOf';\nimport getGravatarImage from './getGravatarImage';\n\nfunction getUserPictureLink(user, size = '80', defaultImage = 'mp') {\n\tconst pictureLink = getPictureLinkOf(user);\n\tconst userPictureLink =\n\t\tpictureLink === ''\n\t\t\t? getGravatarImage(user.email, size, defaultImage)\n\t\t\t: pictureLink;\n\treturn userPictureLink;\n}\n\nexport default getUserPictureLink;\n","import PropTypes from 'prop-types';\nimport { Route, NavLink } from 'react-router-dom';\nimport getUserPictureLink from '../lib/getUserPictureLink';\n\nfunction UsersShowNavbarLink({ currentUser }) {\n  return (\n    <Route\n      path=\"/users/userId\"\n      children={({ match }) => (\n        <NavLink\n          className={`nav-link ${match ? 'active' : ''}`}\n          {...(match && { 'aria-current': 'page' })}\n          exact\n          to={`/users/${currentUser._id}`}\n        >\n          <img\n            className=\"rounded-circle me-2\"\n            src={getUserPictureLink(currentUser)}\n            alt=\"Current user\"\n            width=\"28\"\n            height=\"28\"\n          />\n          <span>{currentUser.firstName}</span>\n        </NavLink>\n      )}\n    />\n  );\n}\n\nUsersShowNavbarLink.propTypes = {\n  currentUser: PropTypes.object.isRequired,\n};\n\nexport default UsersShowNavbarLink;\n","import PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\nimport UsersShowNavbarLink from './UsersShowNavbarLink';\n\nfunction Navbar({ currentUser, signOut }) {\n  return (\n    <nav className=\"navbar navbar-expand-sm navbar-dark bg-dark sticky-top\">\n      <div className=\"container-fluid\">\n        <NavLink className=\"navbar-brand\" to=\"/posts\">\n          Odin Book\n        </NavLink>\n        <button\n          className=\"navbar-toggler\"\n          type=\"button\"\n          data-bs-toggle=\"collapse\"\n          data-bs-target=\"#navbarSupportedContent\"\n          aria-controls=\"navbarSupportedContent\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\"\n        >\n          <span className=\"navbar-toggler-icon\"></span>\n        </button>\n        <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul className=\"navbar-nav ms-auto mb-2 mb-sm-0\">\n            <li className=\"nav-item me-4\">\n              <UsersShowNavbarLink currentUser={currentUser} />\n            </li>\n            <li className=\"nav-item\">\n              <button\n                type=\"button\"\n                className=\"btn btn-outline-light\"\n                onClick={signOut}\n              >\n                Sign out\n              </button>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </nav>\n  );\n}\n\nNavbar.propTypes = {\n  currentUser: PropTypes.object.isRequired,\n  signOut: PropTypes.func.isRequired,\n};\n\nexport default Navbar;\n","import { useEffect, useState } from 'react';\n\nfunction useIsMounted() {\n\tconst [isMounted, setIsMouted] = useState(false);\n\n\tuseEffect(() => {\n\t\tsetIsMouted(true);\n\t\treturn () => setIsMouted(false);\n\t}, []);\n\n\treturn isMounted;\n}\n\nexport default useIsMounted;\n","async function postMultipartData(url = '', formData = {}, getResponse = false) {\n\tconst response = await fetch(url, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\tAuthorization: `Bearer ${localStorage.getItem('jwt')}`,\n\t\t},\n\t\tbody: formData,\n\t});\n\treturn getResponse ? response : response.json();\n}\n\nexport default postMultipartData;\n","import PropTypes from 'prop-types';\n\nfunction SubmitBtn({ className, text, loadingText, disabled, isSubmitting }) {\n\treturn (\n\t\t<button\n\t\t\ttype=\"submit\"\n\t\t\tclassName={className}\n\t\t\tdisabled={disabled || isSubmitting}\n\t\t>\n\t\t\t{isSubmitting ? (\n\t\t\t\t<>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"spinner-border spinner-border-sm fw-bold\"\n\t\t\t\t\t\trole=\"status\"\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t></span>\n\t\t\t\t\t{loadingText}\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<span className=\"fw-bold\">{text}</span>\n\t\t\t)}\n\t\t</button>\n\t);\n}\n\nSubmitBtn.defaultProps = {\n\tclassName: '',\n\ttext: 'Submit',\n\tdisabled: false,\n};\n\nSubmitBtn.propTypes = {\n\tclassName: PropTypes.string.isRequired,\n\ttext: PropTypes.string.isRequired,\n\tloadingText: PropTypes.string.isRequired,\n\tdisabled: PropTypes.bool.isRequired,\n\tisSubmitting: PropTypes.bool.isRequired,\n};\n\nexport default SubmitBtn;\n","import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal } from 'bootstrap/dist/js/bootstrap.bundle';\nimport useIsMounted from '../hooks/useIsMounted';\nimport postMultipartData from '../lib/postMultipartData';\nimport SubmitBtn from './SubmitBtn';\n\nfunction SignUpForm({ setCurrentUser }) {\n\tconst isMounted = useIsMounted();\n\n\t// Can only set file input value to '' for security reason.\n\tconst [state, setState] = useState({\n\t\tfirstName: '',\n\t\tlastName: '',\n\t\temail: '',\n\t\tpassword: '',\n\t\tpasswordConfirmation: '',\n\t});\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\n\tfunction handleInputChange(e) {\n\t\tconst target = e.target;\n\t\tconst name = target.name;\n\t\tconst value = target.value;\n\t\tsetState((prevState) => ({ ...prevState, [name]: value }));\n\t}\n\n\tfunction handleInputFocus(e) {\n\t\tconst input = e.target;\n\t\tconst formGroup = input.parentNode;\n\t\tconst invalidFeedbackDivs = formGroup.querySelectorAll('.invalid-feedback');\n\t\tif (invalidFeedbackDivs.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tinput.classList.remove('is-invalid');\n\t\tfor (const invalidFeedbackDiv of invalidFeedbackDivs) {\n\t\t\tinvalidFeedbackDiv.remove();\n\t\t}\n\t}\n\n\tfunction removeFormErrors() {\n\t\tconst signUpForm = document.getElementById('signUpForm');\n\t\tif (signUpForm) {\n\t\t\tconst invalidFeedbackDivs =\n\t\t\t\tsignUpForm.querySelectorAll('.invalid-feedback');\n\t\t\tif (invalidFeedbackDivs.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst inputs = signUpForm.querySelectorAll('input');\n\t\t\tfor (const input of inputs) {\n\t\t\t\tinput.classList.remove('is-invalid');\n\t\t\t}\n\t\t\tfor (const invalidFeedbackDiv of invalidFeedbackDivs) {\n\t\t\t\tinvalidFeedbackDiv.remove();\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function handleSubmit(e) {\n\t\te.preventDefault();\n\t\tremoveFormErrors();\n\t\tsetIsSubmitting(true);\n\t\tfunction addFormErrors(errors) {\n\t\t\tconst signUpForm = document.getElementById('signUpForm');\n\t\t\tfor (const error of errors) {\n\t\t\t\tconst input = signUpForm.querySelector(`input[name='${error.param}']`);\n\t\t\t\tconst formGroup = input.parentNode;\n\t\t\t\tinput.classList.add('is-invalid');\n\t\t\t\tconst invalidFeedbackDiv = document.createElement('div');\n\t\t\t\tinvalidFeedbackDiv.classList.add('invalid-feedback');\n\t\t\t\tconst invalidFeedbackDivText = document.createTextNode(error.msg);\n\t\t\t\tinvalidFeedbackDiv.appendChild(invalidFeedbackDivText);\n\t\t\t\tformGroup.insertAdjacentElement('beforeend', invalidFeedbackDiv);\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tconst data = await postMultipartData(\n\t\t\t\t`${process.env.REACT_APP_API_URL}/users`,\n\t\t\t\tnew FormData(e.target)\n\t\t\t);\n\t\t\tsetIsSubmitting(false);\n\t\t\tif (data.err) {\n\t\t\t\twindow.alerts([{ msg: data.err.message }]);\n\t\t\t} else if (data.errors) {\n\t\t\t\tlet isEmailErrorIncluded = false;\n\t\t\t\tlet isPictureErrorIncluded = false;\n\t\t\t\tfor (const error of data.errors) {\n\t\t\t\t\tswitch (error.param) {\n\t\t\t\t\t\tcase 'email':\n\t\t\t\t\t\t\tisEmailErrorIncluded = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'picture':\n\t\t\t\t\t\t\tisPictureErrorIncluded = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tisMounted &&\n\t\t\t\t\tsetState({\n\t\t\t\t\t\tfirstName: data.user.firstName,\n\t\t\t\t\t\tlastName: data.user.lastName,\n\t\t\t\t\t\t/* Validator package normalizeEmail() adds a '@' at the front\n\t\t\t\t\t\t   if email is not valid.\n\t\t\t\t\t\t*/\n\t\t\t\t\t\temail: isEmailErrorIncluded ? '' : data.user.email,\n\t\t\t\t\t\t...(isPictureErrorIncluded && { picture: '' }),\n\t\t\t\t\t\tpassword: '',\n\t\t\t\t\t\tpasswordConfirmation: '',\n\t\t\t\t\t});\n\t\t\t\taddFormErrors(data.errors);\n\t\t\t} else {\n\t\t\t\tconst bsSignUpModal = Modal.getInstance(\n\t\t\t\t\tdocument.getElementById('signUpModal')\n\t\t\t\t);\n\t\t\t\tbsSignUpModal.hide();\n\t\t\t\tlocalStorage.setItem('jwt', data.jwt);\n\t\t\t\tsetCurrentUser(data.user);\n\t\t\t\twindow.alerts([\n\t\t\t\t\t{ msg: 'You have successfuly signed up', type: 'success' },\n\t\t\t\t]);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetIsSubmitting(false);\n\t\t\twindow.alerts([{ msg: err.message }]);\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tconst signUpModal = document.getElementById('signUpModal');\n\t\tconst pictureInput = document.getElementById('picture');\n\t\t// Reset state when sign up modal gets hidden.\n\t\tsignUpModal.addEventListener('hidden.bs.modal', (e) => {\n\t\t\tremoveFormErrors();\n\t\t\tsetState({\n\t\t\t\tfirstName: '',\n\t\t\t\tlastName: '',\n\t\t\t\temail: '',\n\t\t\t\tpicture: '',\n\t\t\t\tpassword: '',\n\t\t\t\tpasswordConfirmation: '',\n\t\t\t});\n\t\t\tpictureInput.value = '';\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<form onSubmit={handleSubmit} id=\"signUpForm\">\n\t\t\t<div className=\"mb-3\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tplaceholder=\"First name\"\n\t\t\t\t\taria-label=\"First name\"\n\t\t\t\t\tname=\"firstName\"\n\t\t\t\t\tvalue={state.firstName}\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\tonFocus={handleInputFocus}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"mb-3\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tplaceholder=\"Last name\"\n\t\t\t\t\taria-label=\"Last name\"\n\t\t\t\t\tname=\"lastName\"\n\t\t\t\t\tvalue={state.lastName}\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\tonFocus={handleInputFocus}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"mb-3\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\taria-label=\"Email\"\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tvalue={state.email}\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\tonFocus={handleInputFocus}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"input-group mb-3\">\n\t\t\t\t<label className=\"input-group-text\" htmlFor=\"picture\">\n\t\t\t\t\tUpload picture (optional)\n\t\t\t\t</label>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tid=\"picture\"\n\t\t\t\t\tname=\"picture\"\n\t\t\t\t\tonFocus={handleInputFocus}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"mb-3\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\taria-label=\"Password\"\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tvalue={state.password}\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\tonFocus={handleInputFocus}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"mb-3\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\tplaceholder=\"Password confirmation\"\n\t\t\t\t\taria-label=\"Password confirmation\"\n\t\t\t\t\tname=\"passwordConfirmation\"\n\t\t\t\t\tvalue={state.passwordConfirmation}\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\tonFocus={handleInputFocus}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<SubmitBtn\n\t\t\t\tclassName=\"btn btn-success btn-lg w-100 rounded-3\"\n\t\t\t\ttext=\"Sign Up\"\n\t\t\t\tloadingText=\"Signing Up...\"\n\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t/>\n\t\t</form>\n\t);\n}\n\nSignUpForm.propTypes = {\n\tsetCurrentUser: PropTypes.func.isRequired,\n};\n\nexport default SignUpForm;\n","import PropTypes from 'prop-types';\nimport { Modal } from 'bootstrap/dist/js/bootstrap.bundle';\nimport SignUpForm from './SignUpForm';\n\nfunction SignUpModal({ setCurrentUser }) {\n\tfunction hideModal(e) {\n\t\tconst modalId = e.target.dataset.modalId;\n\t\tconst bsSignUpModal = Modal.getInstance(document.getElementById(modalId));\n\t\tbsSignUpModal.hide();\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName=\"modal fade\"\n\t\t\tid=\"signUpModal\"\n\t\t\ttabIndex=\"-1\"\n\t\t\taria-labelledby=\"signUpModalLabel\"\n\t\t\taria-hidden=\"true\"\n\t\t>\n\t\t\t<div className=\"modal-dialog\">\n\t\t\t\t<div className=\"modal-content\">\n\t\t\t\t\t<div className=\"modal-header\">\n\t\t\t\t\t\t<h3 className=\"modal-title\" id=\"signUpModalLabel\">\n\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t</h3>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\tclassName=\"btn-close\"\n\t\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t\t\tdata-modal-id={'signUpModal'}\n\t\t\t\t\t\t\tonClick={hideModal}\n\t\t\t\t\t\t></button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"modal-body\">\n\t\t\t\t\t\t<SignUpForm setCurrentUser={setCurrentUser} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSignUpModal.propTypes = {\n\tsetCurrentUser: PropTypes.func.isRequired,\n};\n\nexport default SignUpModal;\n","async function postData(url = '', data = {}, getResponse = false) {\n\tconst response = await fetch(url, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tAuthorization: `Bearer ${localStorage.getItem('jwt')}`,\n\t\t},\n\t\tbody: JSON.stringify(data),\n\t});\n\treturn getResponse ? response : response.json();\n}\n\nexport default postData;\n","function facebookSdkConfig() {\n\t/* Facebook SDK is blocked \n\t     by blockers (Firefox Tracking Protection, uBlock Origin, etc...).\n\t   Even if window.FB is set, some resource inside Facebook SDK is blocked too. \n\t   Therefore crashing the app (can't try catch).\n\t*/\n\n\t// Facebook SDK call this function automatically (with delay).\n\twindow.fbAsyncInit = function () {\n\t\twindow.FB.init({\n\t\t\tappId: `${process.env.REACT_APP_FACEBOOK_APP_ID}`,\n\t\t\tcookie: true,\n\t\t\txfbml: true,\n\t\t\tversion: 'v10.0',\n\t\t});\n\n\t\twindow.FB.AppEvents.logPageView();\n\t};\n\n\t// Insert Facebook SDK.\n\t(function (d, s, id) {\n\t\tvar js,\n\t\t\tfjs = d.getElementsByTagName(s)[0];\n\t\tif (d.getElementById(id)) {\n\t\t\treturn;\n\t\t}\n\t\tjs = d.createElement(s);\n\t\tjs.id = id;\n\t\tjs.src = 'https://connect.facebook.net/en_US/sdk.js';\n\t\tfjs.parentNode.insertBefore(js, fjs);\n\t})(document, 'script', 'facebook-jssdk');\n}\n\nexport default facebookSdkConfig;\n","import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Modal } from 'bootstrap/dist/js/bootstrap.bundle';\nimport facebookSdkConfig from '../configs/facebookSdkConfig';\nimport useIsMounted from '../hooks/useIsMounted';\nimport postData from '../lib/postData';\nimport SubmitBtn from './SubmitBtn';\n\nfacebookSdkConfig();\n\nfunction SignInForm({ setIsLoading, setCurrentUser }) {\n\tconst isMounted = useIsMounted();\n\n\tconst [state, setState] = useState({\n\t\temail: '',\n\t\tpassword: '',\n\t});\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\n\tconst [isFacebookSdkLoaded, setIsFacebookSdkLoaded] = useState(undefined);\n\tconst [isFacebookPopupOpen, setIsFacebookLPopupOpen] = useState(false);\n\tconst [facebookResponse, setFacebookResponse] = useState({});\n\n\tfunction handleInputChange(e) {\n\t\tconst target = e.target;\n\t\tconst name = target.name;\n\t\tconst value = target.value;\n\t\tsetState((prevState) => ({ ...prevState, [name]: value }));\n\t}\n\n\tasync function handleSubmit(e) {\n\t\ttry {\n\t\t\te.preventDefault();\n\t\t\tsetIsSubmitting(true);\n\t\t\tconst data = await postData(\n\t\t\t\t`${process.env.REACT_APP_API_URL}/auth/local`,\n\t\t\t\tstate\n\t\t\t);\n\t\t\tsetIsSubmitting(false);\n\t\t\tif (data.err) {\n\t\t\t\tisMounted && setState((prevState) => ({ ...prevState, password: '' }));\n\t\t\t\twindow.alerts([{ msg: data.err.message }]);\n\t\t\t} else {\n\t\t\t\tlocalStorage.setItem('jwt', data.jwt);\n\t\t\t\tsetCurrentUser(data.currentUser);\n\t\t\t\twindow.alerts([\n\t\t\t\t\t{ msg: 'You have successfuly signed in', type: 'success' },\n\t\t\t\t]);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tsetIsSubmitting(false);\n\t\t\twindow.alerts([{ msg: err.message }]);\n\t\t}\n\t}\n\n\tfunction handleFacebookBtnClick() {\n\t\tif (!isFacebookSdkLoaded || isFacebookPopupOpen) {\n\t\t\treturn;\n\t\t}\n\n\t\tasync function sendAccessTokenToApi(response) {\n\t\t\tsetIsLoading(true);\n\t\t\ttry {\n\t\t\t\tconst postResponse = await postData(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/auth/facebook`,\n\t\t\t\t\t{ userAccessToken: response.authResponse.accessToken },\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tconst data = await postResponse.json();\n\t\t\t\tif (data.err) {\n\t\t\t\t\twindow.alerts([{ msg: data.err.message }]);\n\t\t\t\t} else {\n\t\t\t\t\tlocalStorage.setItem('jwt', data.jwt);\n\t\t\t\t\tsetCurrentUser(data.currentUser);\n\t\t\t\t\twindow.alerts([\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmsg: `You have successfuly ${\n\t\t\t\t\t\t\t\tpostResponse.status === 200 ? 'signed in' : 'signed up'\n\t\t\t\t\t\t\t}`,\n\t\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.alerts([{ msg: err.message }]);\n\t\t\t}\n\t\t\tsetIsLoading(false);\n\t\t}\n\n\t\tfunction handleFacebookPopupResponse(response) {\n\t\t\tif (response.status === 'connected') {\n\t\t\t\tif (\n\t\t\t\t\tisDataAccessExpired(response) ||\n\t\t\t\t\t!isScopesGranted(response, 'public_profile,email')\n\t\t\t\t) {\n\t\t\t\t\twindow.alerts([\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmsg: 'Facebook email is required. Please select the Facebook button again.',\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t} else {\n\t\t\t\t\tsendAccessTokenToApi(response);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction isDataAccessExpired(response) {\n\t\t\tif (!response || !response.data_access_expiration_time) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tconst dataAccessExpirationInMilliseconds =\n\t\t\t\t\tresponse.authResponse.data_access_expiration_time * 1000;\n\t\t\t\treturn dataAccessExpirationInMilliseconds <= Date.now();\n\t\t\t}\n\t\t}\n\n\t\tfunction isScopesGranted(response, scopes) {\n\t\t\tif (\n\t\t\t\t!response ||\n\t\t\t\t!response.authResponse ||\n\t\t\t\t!response.authResponse.grantedScopes\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tconst grantedScopes = response.authResponse.grantedScopes.split(',');\n\t\t\t\tconst scopesArr = scopes.split(',');\n\t\t\t\tfor (const scope of scopesArr) {\n\t\t\t\t\tif (!grantedScopes.includes(scope)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tfunction missingGrantedScopes(response, scopes) {\n\t\t\tif (\n\t\t\t\t!response ||\n\t\t\t\t!response.authResponse ||\n\t\t\t\t!response.authResponse.grantedScopes\n\t\t\t) {\n\t\t\t\treturn scopes;\n\t\t\t} else {\n\t\t\t\tconst grantedScopes = response.authResponse.grantedScopes.split(',');\n\t\t\t\tconst scopesArr = scopes.split(',');\n\t\t\t\tlet notGrantedScopes = '';\n\t\t\t\tfor (const scope of scopesArr) {\n\t\t\t\t\tif (!grantedScopes.includes(scope)) {\n\t\t\t\t\t\tif (notGrantedScopes.length > 0) {\n\t\t\t\t\t\t\tnotGrantedScopes += ',';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnotGrantedScopes += scope;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn notGrantedScopes;\n\t\t\t}\n\t\t}\n\n\t\tfunction openFacebookPopup(response) {\n\t\t\tsetIsFacebookLPopupOpen(true);\n\t\t\twindow.FB.login(\n\t\t\t\t(response) => {\n\t\t\t\t\tsetIsFacebookLPopupOpen(false);\n\t\t\t\t\tsetFacebookResponse(response);\n\t\t\t\t\thandleFacebookPopupResponse(response);\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tscope: missingGrantedScopes(response, 'public_profile,email'),\n\t\t\t\t\t...(response.status === 'connected'\n\t\t\t\t\t\t? isDataAccessExpired(response)\n\t\t\t\t\t\t\t? { auth_type: 'reauthorize' }\n\t\t\t\t\t\t\t: !isScopesGranted(response, 'public_profile,email')\n\t\t\t\t\t\t\t? { auth_type: 'rerequest' }\n\t\t\t\t\t\t\t: {}\n\t\t\t\t\t\t: {}),\n\t\t\t\t\treturn_scopes: true,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tfunction statusChangeCallback(response) {\n\t\t\tif (response.status !== 'connected') {\n\t\t\t\topenFacebookPopup(response);\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisDataAccessExpired(response) ||\n\t\t\t\t\t!isScopesGranted(response, 'public_profile,email')\n\t\t\t\t) {\n\t\t\t\t\topenFacebookPopup(response);\n\t\t\t\t} else {\n\t\t\t\t\tsendAccessTokenToApi(response);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tstatusChangeCallback(facebookResponse);\n\t}\n\n\tfunction showModal(e) {\n\t\tconst modalId = e.target.dataset.modalId;\n\t\tconst bsSignUpModal = new Modal(document.getElementById(modalId));\n\t\tbsSignUpModal.show();\n\t}\n\n\tuseEffect(() => {\n\t\tconst timeoutId = setTimeout(() => {\n\t\t\tif (window.FB) {\n\t\t\t\tsetIsFacebookSdkLoaded(true);\n\t\t\t\t/* Firefox blocks Facebook popup if this is the\n\t\t\t\t\t\t first function to be called inside handleFacebookBtnClick()\n\t\t\t\t*/\n\t\t\t\twindow.FB.getLoginStatus((response) => {\n\t\t\t\t\tsetFacebookResponse(response);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetIsFacebookSdkLoaded(false);\n\t\t\t\twindow.alerts([\n\t\t\t\t\t{\n\t\t\t\t\t\tmsg: 'Facebook button is disabled because the Facebook SDK is blocked.',\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t}, 1500);\n\t\treturn () => clearTimeout(timeoutId);\n\t}, []);\n\n\treturn (\n\t\t<form onSubmit={handleSubmit} className=\"p-4 bg-white rounded-3 shadow\">\n\t\t\t<div className=\"mb-3\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\tplaceholder=\"Email\"\n\t\t\t\t\taria-label=\"Email\"\n\t\t\t\t\tdisabled={isFacebookPopupOpen}\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tvalue={state.email}\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"mb-3\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"form-control form-control-lg\"\n\t\t\t\t\tplaceholder=\"Password\"\n\t\t\t\t\taria-label=\"Password\"\n\t\t\t\t\tdisabled={isFacebookPopupOpen}\n\t\t\t\t\tname=\"password\"\n\t\t\t\t\tvalue={state.password}\n\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<SubmitBtn\n\t\t\t\tclassName=\"btn btn-primary btn-lg w-100 rounded-3 mb-2\"\n\t\t\t\ttext=\"Sign In\"\n\t\t\t\tloadingText=\"Signing In...\"\n\t\t\t\tdisabled={isFacebookPopupOpen}\n\t\t\t\tisSubmitting={isSubmitting}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName=\"btn btn-primary btn-lg w-100 rounded-3\"\n\t\t\t\tdisabled={!isFacebookSdkLoaded || isFacebookPopupOpen}\n\t\t\t\tonClick={handleFacebookBtnClick}\n\t\t\t>\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\twidth=\"30\"\n\t\t\t\t\theight=\"30\"\n\t\t\t\t\tfill=\"#fff\"\n\t\t\t\t\tclassName=\"bi bi-facebook\"\n\t\t\t\t\tviewBox=\"0 0 16 16\"\n\t\t\t\t\trole=\"img\"\n\t\t\t\t\taria-label=\"Facebook icon\"\n\t\t\t\t>\n\t\t\t\t\t<path d=\"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z\" />\n\t\t\t\t</svg>\n\t\t\t\t<span className=\"fw-bold ms-2\">Continue with Facebook</span>\n\t\t\t</button>\n\t\t\t<div className=\"border-bottom my-4\"></div>\n\t\t\t<button\n\t\t\t\ttype=\"button\"\n\t\t\t\tclassName=\"btn btn-success btn-lg w-100 rounded-3\"\n\t\t\t\tdata-modal-id=\"signUpModal\"\n\t\t\t\tdisabled={isFacebookPopupOpen}\n\t\t\t\tonClick={showModal}\n\t\t\t>\n\t\t\t\t<span className=\"fw-bold pe-none\">Create New Account</span>\n\t\t\t</button>\n\t\t</form>\n\t);\n}\n\nSignInForm.propTypes = {\n\tsetIsLoading: PropTypes.func.isRequired,\n\tsetCurrentUser: PropTypes.func.isRequired,\n};\n\nexport default SignInForm;\n","import PropTypes from 'prop-types';\nimport SignInForm from '../components/SignInForm';\nimport '../css/SignIn.css';\n\nfunction SignIn({ setIsLoading, setCurrentUser }) {\n\treturn (\n\t\t<div className=\"container mt-4\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<div className=\"col-sm-10 col-md-8 col-lg-6\">\n\t\t\t\t\t<h1 className=\"sign-in-h1 text-primary text-center fw-bold mb-4\">\n\t\t\t\t\t\tOdin Book\n\t\t\t\t\t</h1>\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<SignInForm\n\t\t\t\t\t\t\tsetIsLoading={setIsLoading}\n\t\t\t\t\t\t\tsetCurrentUser={setCurrentUser}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSignIn.propTypes = {\n\tsetIsLoading: PropTypes.func.isRequired,\n\tsetCurrentUser: PropTypes.func.isRequired,\n};\n\nexport default SignIn;\n","function getUserFullName(user) {\n\treturn !user || !user._id ? '' : user.firstName + ' ' + user.lastName;\n}\n\nexport default getUserFullName;\n","import PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport format from 'date-fns/format';\nimport pluralize from 'pluralize';\nimport getPictureLinkOf from '../lib/getPictureLinkOf';\nimport getUserFullName from '../lib/getUserFullName';\nimport '../css/PostCard.css';\n\nfunction PostCard({ post }) {\n\tconst postPicture = getPictureLinkOf(post);\n\tconst authorPicture = getPictureLinkOf(post.author);\n\n\treturn (\n\t\t<article className=\"card mb-3\">\n\t\t\t<div className=\"d-flex align-items-center p-3 pb-2\">\n\t\t\t\t<Link to={`/users/${post.author._id}`}>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={authorPicture}\n\t\t\t\t\t\tclassName=\"img-fluid rounded-circle me-2 author-picture\"\n\t\t\t\t\t\talt=\"Post author\"\n\t\t\t\t\t/>\n\t\t\t\t</Link>\n\t\t\t\t<div>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto={`/users/${post.author._id}`}\n\t\t\t\t\t\tclassName=\"text-dark fw-bold h5 author-link\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{getUserFullName(post.author)}\n\t\t\t\t\t</Link>\n\t\t\t\t\t<p className=\"card-subtitle\">\n\t\t\t\t\t\t{format(new Date(post.updatedAt), 'PPpp')}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"px-3 pb-2\">\n\t\t\t\t<p className=\"mb-0\">{post.text}</p>\n\t\t\t</div>\n\t\t\t{postPicture && (\n\t\t\t\t<Link to={`/posts/${post._id}`}>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={postPicture}\n\t\t\t\t\t\tclassName=\"card-img-top post-image\"\n\t\t\t\t\t\talt=\"Post\"\n\t\t\t\t\t/>\n\t\t\t\t</Link>\n\t\t\t)}\n\t\t\t<div className=\"p-3\">\n\t\t\t\t<Link to={`/posts/${post._id}/reactions`} className=\"card-link\">\n\t\t\t\t\t{post.totalReactions} reactions\n\t\t\t\t</Link>\n\t\t\t\t<Link to={`/posts/${post._id}`} className=\"card-link\">\n\t\t\t\t\t{pluralize('comments', post.totalComments, true)}\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t</article>\n\t);\n}\n\nPostCard.propTypes = {\n\tpost: PropTypes.object.isRequired,\n};\n\nexport default PostCard;\n","import PropTypes from 'prop-types';\nimport PostCard from './PostCard';\n\nfunction PostsCards({ posts }) {\n\tconst postsCards = posts.map((post) => (\n\t\t<PostCard key={post._id} post={post} />\n\t));\n\n\treturn <>{postsCards}</>;\n}\n\nPostsCards.propTypes = {\n\tposts: PropTypes.array.isRequired,\n};\n\nexport default PostsCards;\n","import { useState, useEffect } from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport useIsMounted from '../hooks/useIsMounted';\nimport getData from '../lib/getData';\nimport BootstrapSpinner from '../components/BootstrapSpinner';\nimport PostsCards from '../components/PostsCards';\n\nfunction PostsIndexView() {\n\tconst isMounted = useIsMounted();\n\n\tconst [isInitialPostsLoading, setIsInitialPostsLoading] = useState(true);\n\tconst [currentPage, setCurrentPage] = useState(1);\n\tconst [posts, setPosts] = useState([]);\n\tconst [totalPosts, setTotalPosts] = useState(undefined);\n\tconst [hasMore, setHasMore] = useState(false);\n\n\tfunction incrementCurrentPage() {\n\t\tsetCurrentPage((prevCurrentPage) => prevCurrentPage + 1);\n\t}\n\n\tuseEffect(() => {\n\t\tif (!isMounted) {\n\t\t\treturn;\n\t\t}\n\n\t\tasync function fetchAndSetPosts() {\n\t\t\ttry {\n\t\t\t\tconst data = await getData(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts?page=${currentPage}&limit=10`\n\t\t\t\t);\n\t\t\t\tif (data.err) {\n\t\t\t\t\twindow.alerts([{ msg: data.err.message }]);\n\t\t\t\t} else {\n\t\t\t\t\tconst posts = await Promise.all(\n\t\t\t\t\t\tdata.posts.map(async (post) => {\n\t\t\t\t\t\t\tconst reactionsData = await getData(\n\t\t\t\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${post._id}/reactions?noDocs=true`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (reactionsData.err) {\n\t\t\t\t\t\t\t\twindow.alerts([{ msg: reactionsData.err.message }]);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst commentsData = await getData(\n\t\t\t\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${post._id}/comments?noDocs=true`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (commentsData.err) {\n\t\t\t\t\t\t\t\twindow.alerts([{ msg: commentsData.err.message }]);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...post,\n\t\t\t\t\t\t\t\ttotalReactions: reactionsData.totalReactions,\n\t\t\t\t\t\t\t\ttotalComments: commentsData.totalComments,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tif (isMounted) {\n\t\t\t\t\t\tsetPosts((prevPosts) => prevPosts.concat(posts));\n\t\t\t\t\t\tsetTotalPosts(data.totalPosts);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.alerts([{ msg: err.message }]);\n\t\t\t}\n\t\t\tisMounted && currentPage === 1 && setIsInitialPostsLoading(false);\n\t\t}\n\n\t\tfetchAndSetPosts();\n\t}, [isMounted, currentPage]);\n\n\tuseEffect(() => {\n\t\tif (!isMounted || typeof totalPosts !== 'number') {\n\t\t\treturn;\n\t\t}\n\t\tsetHasMore(posts.length < totalPosts);\n\t}, [isMounted, posts, totalPosts]);\n\n\treturn isInitialPostsLoading ? (\n\t\t<BootstrapSpinner\n\t\t\ttype={'border'}\n\t\t\tsize={'2em'}\n\t\t\tclasses={'position-absolute top-50 start-50 translate-middle'}\n\t\t/>\n\t) : (\n\t\t<div className=\"container mt-3\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<section className=\"col-md-8\">\n\t\t\t\t\t<InfiniteScroll\n\t\t\t\t\t\tdataLength={posts.length}\n\t\t\t\t\t\tnext={incrementCurrentPage}\n\t\t\t\t\t\thasMore={hasMore}\n\t\t\t\t\t\tloader={\n\t\t\t\t\t\t\t<div className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t\t\t<BootstrapSpinner type={'border'} size={'2em'} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* This div's scrollbar flickers if loader is BootstrapSpinner\n\t\t\t\t\t\t\t\t with size bigger than 1em (I only test for 1em).\n\t\t\t\t\t\t\t\t Setting overflow to none fix the problem.\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\tstyle={{ overflow: 'none' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<PostsCards posts={posts} />\n\t\t\t\t\t</InfiniteScroll>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default PostsIndexView;\n","function NotFoundView() {\n\treturn <h1 className=\"text-center mt-5\">404 Not Found</h1>;\n}\n\nexport default NotFoundView;\n","import PropTypes from 'prop-types';\nimport format from 'date-fns/format';\nimport getUserFullName from '../lib/getUserFullName';\n\nfunction Comments({ comments }) {\n\treturn comments.length > 0 ? (\n\t\t<ul className=\"list-group\">\n\t\t\t{comments.map((comment) => (\n\t\t\t\t<li key={comment._id} className=\"list-group-item\">\n\t\t\t\t\t<p className=\"h6 mb-1\">{getUserFullName(comment.author)}</p>\n\t\t\t\t\t<p className=\"text-muted mb-2\">\n\t\t\t\t\t\t{format(new Date(comment.createdAt), 'PPpp')}\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className=\"mb-2\">{comment.text}</p>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t</ul>\n\t) : null;\n}\n\nComments.propTypes = {\n\tcomments: PropTypes.array.isRequired,\n};\n\nexport default Comments;\n","import { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport useIsMounted from '../hooks/useIsMounted';\nimport getData from '../lib/getData';\nimport NotFoundView from './NotFoundView';\nimport BootstrapSpinner from '../components/BootstrapSpinner';\nimport PostCard from '../components/PostCard';\nimport Comments from '../components/Comments';\n\nfunction PostsShowView() {\n\tconst { postId } = useParams();\n\tconst isMounted = useIsMounted();\n\n\tconst [is404, setIs404] = useState(false);\n\tconst [isPostLoading, setIsPostLoading] = useState(true);\n\tconst [post, setPost] = useState({});\n\tconst [totalReactions, setTotalReactions] = useState(undefined);\n\tconst [isInitialCommentsLoading, setIsInitialCommentsLoading] = useState(\n\t\ttrue\n\t);\n\tconst [currentCommentsPage, setCurrentCommentsPage] = useState(1);\n\tconst [comments, setComments] = useState([]);\n\tconst [totalComments, setTotalComments] = useState(undefined);\n\tconst [hasMoreComments, setHasMoreComments] = useState(false);\n\n\tfunction incrementCurrentCommentsPage() {\n\t\tsetCurrentCommentsPage(\n\t\t\t(prevCurrentCommentsPage) => prevCurrentCommentsPage + 1\n\t\t);\n\t}\n\n\tuseEffect(() => {\n\t\tif (!isMounted) {\n\t\t\treturn;\n\t\t}\n\n\t\tasync function fetchAndSetPost() {\n\t\t\ttry {\n\t\t\t\tconst postResponse = await getData(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${postId}`,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tif (postResponse.status === 404) {\n\t\t\t\t\tisMounted && setIs404(true);\n\t\t\t\t}\n\t\t\t\tconst postData = await postResponse.json();\n\t\t\t\tif (postData.err) {\n\t\t\t\t\twindow.alerts([{ msg: postData.err.message }]);\n\t\t\t\t} else {\n\t\t\t\t\tisMounted && setPost(postData.post);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.alerts([{ msg: err.message }]);\n\t\t\t}\n\t\t}\n\n\t\tfetchAndSetPost();\n\t}, [isMounted, postId]);\n\n\tuseEffect(() => {\n\t\tif (!isMounted || !post._id) {\n\t\t\treturn;\n\t\t}\n\n\t\tasync function fetchAndSetTotalReactions() {\n\t\t\ttry {\n\t\t\t\tconst data = await getData(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${post._id}/reactions?noDocs=true`\n\t\t\t\t);\n\t\t\t\tif (data.err) {\n\t\t\t\t\twindow.alerts([{ msg: data.err.message }]);\n\t\t\t\t} else {\n\t\t\t\t\tsetTotalReactions(data.totalReactions);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.alerts([{ msg: err.message }]);\n\t\t\t}\n\t\t\tisMounted && setIsPostLoading(false);\n\t\t}\n\n\t\tfetchAndSetTotalReactions();\n\t}, [isMounted, post]);\n\n\tuseEffect(() => {\n\t\tif (!isMounted || !post._id) {\n\t\t\treturn;\n\t\t}\n\n\t\tasync function fetchAndSetComments() {\n\t\t\ttry {\n\t\t\t\tconst data = await getData(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${post._id}/comments?page=${currentCommentsPage}&limit=10`\n\t\t\t\t);\n\t\t\t\tif (data.err) {\n\t\t\t\t\twindow.alerts([{ msg: data.err.message }]);\n\t\t\t\t} else {\n\t\t\t\t\tif (isMounted) {\n\t\t\t\t\t\tsetComments((prevComments) => prevComments.concat(data.comments));\n\t\t\t\t\t\tsetTotalComments(data.totalComments);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.alerts([{ msg: err.message }]);\n\t\t\t}\n\t\t\tisMounted &&\n\t\t\t\tcurrentCommentsPage === 1 &&\n\t\t\t\tsetIsInitialCommentsLoading(false);\n\t\t}\n\n\t\tfetchAndSetComments();\n\t}, [isMounted, post, currentCommentsPage]);\n\n\tuseEffect(() => {\n\t\tif (!isMounted || typeof totalComments !== 'number') {\n\t\t\treturn;\n\t\t}\n\t\tsetHasMoreComments(comments.length < totalComments);\n\t}, [isMounted, comments, totalComments]);\n\n\treturn isPostLoading ? (\n\t\t<BootstrapSpinner\n\t\t\ttype={'border'}\n\t\t\tsize={'2em'}\n\t\t\tclasses={'position-absolute top-50 start-50 translate-middle'}\n\t\t/>\n\t) : is404 ? (\n\t\t<NotFoundView />\n\t) : (\n\t\t<div className=\"container mt-3\">\n\t\t\t<div className=\"row justify-content-center\">\n\t\t\t\t<section className=\"col-md-8\">\n\t\t\t\t\t<PostCard post={{ ...post, totalReactions, totalComments }} />\n\t\t\t\t\t{isInitialCommentsLoading ? (\n\t\t\t\t\t\t<div className=\"position-relative\" style={{ minHeight: '10em' }}>\n\t\t\t\t\t\t\t<BootstrapSpinner\n\t\t\t\t\t\t\t\ttype={'border'}\n\t\t\t\t\t\t\t\tsize={'2em'}\n\t\t\t\t\t\t\t\tclasses={'position-absolute top-50 start-50 translate-middle'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<InfiniteScroll\n\t\t\t\t\t\t\tdataLength={comments.length}\n\t\t\t\t\t\t\tnext={incrementCurrentCommentsPage}\n\t\t\t\t\t\t\thasMore={hasMoreComments}\n\t\t\t\t\t\t\tloader={\n\t\t\t\t\t\t\t\t<div className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t\t\t\t<BootstrapSpinner type={'border'} size={'2em'} />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstyle={{ overflow: 'none' }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Comments comments={comments} />\n\t\t\t\t\t\t</InfiniteScroll>\n\t\t\t\t\t)}\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default PostsShowView;\n","import PropTypes from 'prop-types';\nimport getUserPictureLink from '../lib/getUserPictureLink';\n\nfunction UserPicture({ user }) {\n\treturn (\n\t\t<div className=\"user-picture-container\">\n\t\t\t<img\n\t\t\t\tsrc={getUserPictureLink(user)}\n\t\t\t\talt=\"User\"\n\t\t\t\tclassName=\"img-thumbnail user-picture\"\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nUserPicture.propTypes = {\n\tuser: PropTypes.object.isRequired,\n};\n\nexport default UserPicture;\n","import PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport pluralize from 'pluralize';\nimport getUserFullName from '../lib/getUserFullName';\nimport getUserPictureLink from '../lib/getUserPictureLink';\n\nfunction UserFriends({ userId, friends, totalFriends }) {\n\treturn (\n\t\t<div className=\"position-relative user-friends\">\n\t\t\t<h2 className=\"h4 ms-4 ms-md-0 mb-4 mb-md-2\">\n\t\t\t\t<Link to={`/users/${userId}/friends`}>\n\t\t\t\t\t{pluralize('friend', totalFriends || 0, true)}\n\t\t\t\t</Link>\n\t\t\t</h2>\n\t\t\t<div className=\"text-center d-none d-md-grid user-friends-grid\">\n\t\t\t\t{friends.slice(0, 9).map((friend) => {\n\t\t\t\t\tconst userFullName = getUserFullName(friend);\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto={`/users/${friend._id}`}\n\t\t\t\t\t\t\tkey={friend._id}\n\t\t\t\t\t\t\tclassName=\"user-friends-grid-item\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<figure className=\"mb-0\">\n\t\t\t\t\t\t\t\t<div className=\"user-friends-grid-item-image-container\">\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={getUserPictureLink(friend)}\n\t\t\t\t\t\t\t\t\t\talt={userFullName}\n\t\t\t\t\t\t\t\t\t\tclassName=\"img-fluid user-friends-grid-item-image\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<figcaption>{userFullName}</figcaption>\n\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nUserFriends.propTypes = {\n\tuserId: PropTypes.string.isRequired,\n\tfriends: PropTypes.array.isRequired,\n\ttotalFriends: PropTypes.number.isRequired,\n};\n\nexport default UserFriends;\n","import PropTypes from 'prop-types';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport BootstrapSpinner from './BootstrapSpinner';\nimport PostsCards from './PostsCards';\n\nfunction UserPosts({ posts, hasMore, incrementCurrentPage }) {\n\treturn (\n\t\t<section className=\"position-relative\">\n\t\t\t<InfiniteScroll\n\t\t\t\tdataLength={posts.length}\n\t\t\t\tnext={incrementCurrentPage}\n\t\t\t\thasMore={hasMore}\n\t\t\t\tloader={\n\t\t\t\t\t<div className=\"d-flex justify-content-center\">\n\t\t\t\t\t\t<BootstrapSpinner type={'border'} size={'2em'} />\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\tstyle={{ overflow: 'none' }}\n\t\t\t>\n\t\t\t\t<PostsCards posts={posts} />\n\t\t\t</InfiniteScroll>\n\t\t</section>\n\t);\n}\n\nUserPosts.propTypes = {\n\tposts: PropTypes.array.isRequired,\n\thasMore: PropTypes.bool.isRequired,\n\tincrementCurrentPage: PropTypes.func.isRequired,\n};\n\nexport default UserPosts;\n","import { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport useIsMounted from '../hooks/useIsMounted';\nimport getData from '../lib/getData';\nimport getUserFullName from '../lib/getUserFullName';\nimport NotFoundView from './NotFoundView';\nimport BootstrapSpinner from '../components/BootstrapSpinner';\nimport UserPicture from '../components/UserPicture';\nimport UserFriends from '../components/UserFriends';\nimport UserPosts from '../components/UserPosts';\n\nimport '../css/UsersShowView.scss';\n\nfunction UsersShowView(props) {\n\tconst { userId } = useParams();\n\tconst isMounted = useIsMounted();\n\n\tconst [is404, setIs404] = useState(false);\n\tconst [isUserLoading, setIsUserLoading] = useState(true);\n\tconst [user, setUser] = useState({});\n\tconst [isFriendsLoading, setIsFriendsLoading] = useState(true);\n\tconst [friends, setFriends] = useState([]);\n\tconst [totalFriends, setTotalFriends] = useState(undefined);\n\tconst [isInitialPostsLoading, setIsInitialPostsLoading] = useState(true);\n\tconst [currentPage, setCurrentPage] = useState(1);\n\tconst [posts, setPosts] = useState([]);\n\tconst [totalPosts, setTotalPosts] = useState(undefined);\n\tconst [hasMore, setHasMore] = useState(false);\n\n\tfunction incrementCurrentPage() {\n\t\tsetCurrentPage((prevCurrentPage) => prevCurrentPage + 1);\n\t}\n\n\t// isMounted && setState() prevent memory leak warning\n\t// if user leaves the page when there's an async task.\n\n\tuseEffect(() => {\n\t\t// useEffect called twice without isMounted.\n\t\t// useEffect is called twice because of isMounted changing value from false to true).\n\t\tif (!isMounted) {\n\t\t\treturn;\n\t\t}\n\n\t\tasync function fetchAndSetUser() {\n\t\t\ttry {\n\t\t\t\tconst response = await getData(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/users/${userId}`,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t\tif (response.status === 404) {\n\t\t\t\t\tisMounted && setIs404(true);\n\t\t\t\t} else {\n\t\t\t\t\tconst data = await response.json();\n\t\t\t\t\tif (data.err) {\n\t\t\t\t\t\twindow.alerts([{ msg: data.err.message }]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tisMounted && setUser(data.user);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.alerts([{ msg: err.message }]);\n\t\t\t}\n\t\t\tisMounted && setIsUserLoading(false);\n\t\t}\n\n\t\tfetchAndSetUser();\n\t}, [isMounted, userId]);\n\n\tuseEffect(() => {\n\t\tif (!isMounted || !user._id) {\n\t\t\treturn;\n\t\t}\n\n\t\tasync function fetchAndSetFriends() {\n\t\t\ttry {\n\t\t\t\tconst data = await getData(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/users/${user._id}/friends?page=1&limit=10`\n\t\t\t\t);\n\t\t\t\tif (data.err) {\n\t\t\t\t\twindow.alerts([{ msg: data.err.message }]);\n\t\t\t\t} else {\n\t\t\t\t\tif (isMounted) {\n\t\t\t\t\t\tsetFriends(data.users);\n\t\t\t\t\t\tsetTotalFriends(data.totalUsers);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.alerts([{ msg: err.message }]);\n\t\t\t}\n\t\t\tisMounted && setIsFriendsLoading(false);\n\t\t}\n\n\t\tfetchAndSetFriends();\n\t}, [isMounted, user]);\n\n\tuseEffect(() => {\n\t\tif (!isMounted || !user._id) {\n\t\t\treturn;\n\t\t}\n\n\t\tasync function fetchAndSetPosts() {\n\t\t\ttry {\n\t\t\t\tconst data = await getData(\n\t\t\t\t\t`${process.env.REACT_APP_API_URL}/users/${user._id}/posts?page=${currentPage}&limit=10`\n\t\t\t\t);\n\t\t\t\tif (data.err) {\n\t\t\t\t\twindow.alerts([{ msg: data.err.message }]);\n\t\t\t\t} else {\n\t\t\t\t\tconst posts = await Promise.all(\n\t\t\t\t\t\tdata.posts.map(async (post) => {\n\t\t\t\t\t\t\tconst reactionsData = await getData(\n\t\t\t\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${post._id}/reactions?noDocs=true`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (reactionsData.err) {\n\t\t\t\t\t\t\t\twindow.alerts([{ msg: reactionsData.err.message }]);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst commentsData = await getData(\n\t\t\t\t\t\t\t\t`${process.env.REACT_APP_API_URL}/posts/${post._id}/comments?noDocs=true`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (commentsData.err) {\n\t\t\t\t\t\t\t\twindow.alerts([{ msg: commentsData.err.message }]);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t...post,\n\t\t\t\t\t\t\t\ttotalReactions: reactionsData.totalReactions,\n\t\t\t\t\t\t\t\ttotalComments: commentsData.totalComments,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tif (isMounted) {\n\t\t\t\t\t\tsetPosts((prevPosts) => prevPosts.concat(posts));\n\t\t\t\t\t\tsetTotalPosts(data.totalPosts);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\twindow.alerts([{ msg: err.message }]);\n\t\t\t}\n\t\t\tisMounted && currentPage === 1 && setIsInitialPostsLoading(false);\n\t\t}\n\n\t\tfetchAndSetPosts();\n\t}, [isMounted, user, currentPage]);\n\n\tuseEffect(() => {\n\t\tif (typeof totalPosts !== 'number') {\n\t\t\treturn;\n\t\t}\n\t\tisMounted && setHasMore(posts.length < totalPosts);\n\t}, [isMounted, posts, totalPosts]);\n\n\treturn isUserLoading ? (\n\t\t<BootstrapSpinner\n\t\t\ttype={'border'}\n\t\t\tsize={'2em'}\n\t\t\tclasses={'position-absolute top-50 start-50 translate-middle'}\n\t\t/>\n\t) : is404 ? (\n\t\t<NotFoundView />\n\t) : (\n\t\t<div className=\"container mt-3\">\n\t\t\t<div className=\"row\">\n\t\t\t\t<div className=\"col-md-4\">\n\t\t\t\t\t<UserPicture user={user} />\n\t\t\t\t\t<h1 className=\"text-center\">{getUserFullName(user)}</h1>\n\t\t\t\t\t{isFriendsLoading ? (\n\t\t\t\t\t\t<div className=\"position-relative\" style={{ minHeight: '10em' }}>\n\t\t\t\t\t\t\t<BootstrapSpinner\n\t\t\t\t\t\t\t\ttype={'border'}\n\t\t\t\t\t\t\t\tsize={'2em'}\n\t\t\t\t\t\t\t\tclasses={'position-absolute top-50 start-50 translate-middle'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<UserFriends\n\t\t\t\t\t\t\tuserId={user._id}\n\t\t\t\t\t\t\tfriends={friends}\n\t\t\t\t\t\t\ttotalFriends={totalFriends}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-md-8\">\n\t\t\t\t\t{isInitialPostsLoading ? (\n\t\t\t\t\t\t<div className=\"position-relative\" style={{ minHeight: '10em' }}>\n\t\t\t\t\t\t\t<BootstrapSpinner\n\t\t\t\t\t\t\t\ttype={'border'}\n\t\t\t\t\t\t\t\tsize={'2em'}\n\t\t\t\t\t\t\t\tclasses={'position-absolute top-50 start-50 translate-middle'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<UserPosts\n\t\t\t\t\t\t\tposts={posts}\n\t\t\t\t\t\t\thasMore={hasMore}\n\t\t\t\t\t\t\tincrementCurrentPage={incrementCurrentPage}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default UsersShowView;\n","import './App.css';\nimport { useState, useEffect } from 'react';\nimport { Switch, Route, Redirect, useHistory } from 'react-router-dom';\nimport { nanoid } from 'nanoid';\nimport bus from './utils/bus';\nimport getData from './lib/getData';\nimport BootstrapSpinner from './components/BootstrapSpinner';\nimport Alerts from './components/Alerts';\nimport Navbar from './components/Navbar';\nimport SignUpModal from './components/SignUpModal';\nimport SignInView from './views/SignInView';\nimport PostsIndexView from './views/PostsIndexView';\nimport PostsShowView from './views/PostsShowView';\nimport UsersShowView from './views/UsersShowView';\nimport NotFoundView from './views/NotFoundView';\n\nfunction App() {\n  const history = useHistory();\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [alerts, setAlerts] = useState([]);\n  const [currentUser, setCurrentUser] = useState(null);\n\n  function handleAlertDelete(alertId) {\n    const newAlerts = alerts.filter((alert) => alert.id !== alertId);\n    setAlerts(newAlerts);\n  }\n\n  function signOut() {\n    localStorage.removeItem('jwt');\n    setCurrentUser(false);\n    history.push('/');\n    window.alerts([\n      { msg: 'You have successfully signed out', type: 'success' },\n    ]);\n  }\n\n  // Listen for 'alerts' event and sets the alerts.\n  useEffect(() => {\n    bus.addListener('alerts', (alerts) => {\n      const alertsWithId = alerts.map((alert) => ({\n        ...alert,\n        id: nanoid(),\n      }));\n      setAlerts(alertsWithId);\n    });\n  }, []);\n\n  // Add a global function that emit an alerts event.\n  useEffect(() => {\n    window.alerts = (alerts) => bus.emit('alerts', alerts);\n  }, []);\n\n  useEffect(() => {\n    async function fetchAndSetCurrentUser() {\n      try {\n        const data = await getData(\n          `${process.env.REACT_APP_API_URL}/users/current-user`\n        );\n        setCurrentUser(data.currentUser);\n      } catch (err) {\n        setCurrentUser(false);\n        window.alerts([{ msg: err.message }]);\n      }\n      setIsLoading(false);\n    }\n    fetchAndSetCurrentUser();\n  }, []);\n\n  return isLoading ? (\n    <BootstrapSpinner\n      type={'grow'}\n      size={'3em'}\n      classes={'position-absolute top-50 start-50 translate-middle'}\n    />\n  ) : (\n    <>\n      {currentUser && <Navbar currentUser={currentUser} signOut={signOut} />}\n      {alerts.length > 0 && (\n        <div className=\"container\">\n          <div className=\"row justify-content-center\">\n            <div className=\"col-md-8\">\n              <Alerts alerts={alerts} onAlertDelete={handleAlertDelete} />\n            </div>\n          </div>\n        </div>\n      )}\n      <main>\n        <Switch>\n          <Route exact path=\"/\">\n            {currentUser ? (\n              <Redirect to=\"/posts\" />\n            ) : (\n              <>\n                <SignUpModal setCurrentUser={setCurrentUser} />\n                <SignInView\n                  setIsLoading={setIsLoading}\n                  setCurrentUser={setCurrentUser}\n                />\n              </>\n            )}\n          </Route>\n          <Route exact path=\"/posts\">\n            {currentUser ? <PostsIndexView /> : <Redirect to=\"/\" />}\n          </Route>\n          {/* I used render method of Route to create new instance of \n              UsersShowView by passing userId as key.\n          */}\n          <Route\n            exact\n            path=\"/posts/:postId\"\n            render={(props) => {\n              return currentUser ? (\n                <PostsShowView key={props.match.params.postId} {...props} />\n              ) : (\n                <Redirect to=\"/\" />\n              );\n            }}\n          />\n          <Route\n            exact\n            path=\"/users/:userId\"\n            render={(props) => {\n              return currentUser ? (\n                <UsersShowView key={props.match.params.userId} {...props} />\n              ) : (\n                <Redirect to=\"/\" />\n              );\n            }}\n          />\n          <Route>\n            <NotFoundView />\n          </Route>\n        </Switch>\n      </main>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router } from 'react-router-dom';\nimport 'bootswatch/dist/cosmo/bootstrap.css';\nimport 'bootstrap/dist/js/bootstrap.bundle';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nrequire('dotenv').config();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}